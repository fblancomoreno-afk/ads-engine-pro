<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ads Engine Pro V8 TOP - Francisco Blanco | Google Ads Campaign Generator</title>
  
  <!-- SheetJS for Excel export -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
  
  <style>
    @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;600;700&family=Sora:wght@300;400;600;700;800&display=swap');
    
    :root {
      --primary: #0066ff;
      --primary-dark: #0052cc;
      --accent: #ff3366;
      --success: #00d084;
      --warning: #ff9500;
      --bg-main: #0a0f1e;
      --bg-card: #111827;
      --bg-input: #1a2332;
      --text-primary: #f8fafc;
      --text-secondary: #94a3b8;
      --text-muted: #64748b;
      --border: #1e293b;
      --border-light: #2d3748;
    }
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Sora', sans-serif;
      background: var(--bg-main);
      color: var(--text-primary);
      line-height: 1.6;
      overflow-x: hidden;
    }
    
    /* Animated background */
    .bg-animated {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 0;
      overflow: hidden;
      pointer-events: none;
    }
    
    .bg-animated::before {
      content: '';
      position: absolute;
      width: 600px;
      height: 600px;
      background: radial-gradient(circle, rgba(0, 102, 255, 0.15) 0%, transparent 70%);
      top: -300px;
      right: -100px;
      animation: float 20s infinite ease-in-out;
    }
    
    .bg-animated::after {
      content: '';
      position: absolute;
      width: 400px;
      height: 400px;
      background: radial-gradient(circle, rgba(255, 51, 102, 0.1) 0%, transparent 70%);
      bottom: -200px;
      left: -100px;
      animation: float 15s infinite ease-in-out reverse;
    }
    
    @keyframes float {
      0%, 100% { transform: translate(0, 0) rotate(0deg); }
      33% { transform: translate(30px, -30px) rotate(5deg); }
      66% { transform: translate(-20px, 20px) rotate(-5deg); }
    }
    
    .container {
      position: relative;
      z-index: 1;
      max-width: 1400px;
      margin: 0 auto;
      padding: 40px 24px;
    }
    
    /* Header */
    .header {
      text-align: center;
      margin-bottom: 48px;
      animation: fadeInDown 0.6s ease-out;
    }
    
    .header h1 {
      font-size: clamp(32px, 5vw, 56px);
      font-weight: 800;
      background: linear-gradient(135deg, var(--primary) 0%, var(--accent) 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 12px;
      letter-spacing: -0.02em;
    }
    
    .header p {
      color: var(--text-secondary);
      font-size: 16px;
      max-width: 600px;
      margin: 0 auto;
    }
    
    .badge {
      display: inline-block;
      padding: 6px 16px;
      background: rgba(0, 102, 255, 0.1);
      border: 1px solid rgba(0, 102, 255, 0.3);
      border-radius: 20px;
      font-size: 12px;
      font-weight: 600;
      color: var(--primary);
      margin-top: 12px;
      font-family: 'JetBrains Mono', monospace;
    }
    
    /* NEW: URL Feature Badge */
    .badge-new {
      background: linear-gradient(135deg, rgba(0, 208, 132, 0.2), rgba(0, 102, 255, 0.2));
      border: 1px solid var(--success);
      color: var(--success);
      animation: pulse 2s infinite;
    }
    
    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.7; }
    }
    
    /* Wizard Navigation */
    .wizard-nav {
      display: flex;
      justify-content: center;
      gap: 8px;
      margin-bottom: 40px;
      animation: fadeIn 0.6s ease-out 0.2s backwards;
    }
    
    .wizard-step {
      flex: 1;
      max-width: 200px;
      padding: 16px;
      background: var(--bg-card);
      border: 2px solid var(--border);
      border-radius: 12px;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }
    
    .wizard-step::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 3px;
      background: linear-gradient(90deg, var(--primary), var(--accent));
      transform: translateX(-100%);
      transition: transform 0.3s ease;
    }
    
    .wizard-step.active::before {
      transform: translateX(0);
    }
    
    .wizard-step.active {
      background: rgba(0, 102, 255, 0.05);
      border-color: var(--primary);
      box-shadow: 0 0 20px rgba(0, 102, 255, 0.2);
    }
    
    .wizard-step.completed {
      border-color: var(--success);
    }
    
    .wizard-step:hover {
      transform: translateY(-2px);
      border-color: var(--primary);
    }
    
    .step-number {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 32px;
      height: 32px;
      background: var(--bg-input);
      border-radius: 50%;
      font-weight: 700;
      font-size: 14px;
      margin-bottom: 8px;
      font-family: 'JetBrains Mono', monospace;
    }
    
    .wizard-step.active .step-number {
      background: var(--primary);
      color: white;
    }
    
    .wizard-step.completed .step-number {
      background: var(--success);
      color: white;
    }
    
    .step-title {
      font-size: 13px;
      font-weight: 600;
      color: var(--text-secondary);
    }
    
    .wizard-step.active .step-title {
      color: var(--text-primary);
    }
    
    /* Step Content */
    .step-content {
      display: none;
      animation: fadeIn 0.4s ease-out;
    }
    
    .step-content.active {
      display: block;
    }
    
    .card {
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: 16px;
      padding: 32px;
      margin-bottom: 24px;
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.2);
      transition: all 0.3s ease;
    }
    
    .card:hover {
      border-color: var(--border-light);
      box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.3);
    }
    
    .card-title {
      font-size: 20px;
      font-weight: 700;
      margin-bottom: 8px;
      color: var(--text-primary);
    }
    
    .card-subtitle {
      font-size: 14px;
      color: var(--text-muted);
      margin-bottom: 24px;
    }
    
    /* NEW: URL Analysis Card */
    .url-card {
      background: linear-gradient(135deg, rgba(0, 208, 132, 0.05), rgba(0, 102, 255, 0.05));
      border: 1px solid rgba(0, 208, 132, 0.3);
    }
    
    .url-card:hover {
      border-color: var(--success);
      box-shadow: 0 0 20px rgba(0, 208, 132, 0.2);
    }
    
    .url-status {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 8px 16px;
      background: rgba(0, 208, 132, 0.1);
      border: 1px solid rgba(0, 208, 132, 0.3);
      border-radius: 8px;
      font-size: 13px;
      font-weight: 600;
      color: var(--success);
      margin-top: 12px;
    }
    
    .url-loading {
      display: inline-block;
      width: 16px;
      height: 16px;
      border: 2px solid var(--success);
      border-top-color: transparent;
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
    }
    
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    
    .form-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 20px;
    }
    
    .form-group {
      margin-bottom: 20px;
    }
    
    .form-label {
      display: block;
      font-size: 14px;
      font-weight: 600;
      color: var(--text-secondary);
      margin-bottom: 8px;
    }
    
    .form-label-required::after {
      content: '*';
      color: var(--accent);
      margin-left: 4px;
    }
    
    .form-input,
    .form-select,
    .form-textarea {
      width: 100%;
      padding: 12px 16px;
      background: var(--bg-input);
      border: 2px solid var(--border);
      border-radius: 10px;
      color: var(--text-primary);
      font-size: 14px;
      font-family: inherit;
      transition: all 0.3s ease;
    }
    
    .form-input:focus,
    .form-select:focus,
    .form-textarea:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(0, 102, 255, 0.1);
    }
    
    .form-textarea {
      min-height: 100px;
      resize: vertical;
    }
    
    .form-hint {
      font-size: 12px;
      color: var(--text-muted);
      margin-top: 6px;
    }
    
    /* Buttons */
    .btn-group {
      display: flex;
      gap: 12px;
      margin-top: 32px;
      flex-wrap: wrap;
    }
    
    .btn {
      padding: 14px 28px;
      border: none;
      border-radius: 10px;
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      font-family: inherit;
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }
    
    .btn-primary {
      background: linear-gradient(135deg, var(--primary), var(--primary-dark));
      color: white;
      box-shadow: 0 4px 12px rgba(0, 102, 255, 0.3);
    }
    
    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(0, 102, 255, 0.4);
    }
    
    .btn-primary:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none;
    }
    
    .btn-secondary {
      background: var(--bg-card);
      color: var(--text-primary);
      border: 2px solid var(--border);
    }
    
    .btn-secondary:hover {
      border-color: var(--primary);
      background: rgba(0, 102, 255, 0.05);
    }
    
    .btn-icon {
      font-size: 18px;
    }
    
    /* Loading State */
    .loading-container {
      display: none;
      text-align: center;
      padding: 60px 20px;
    }
    
    .loading-container.active {
      display: block;
    }
    
    .loader {
      width: 60px;
      height: 60px;
      border: 4px solid var(--border);
      border-top-color: var(--primary);
      border-radius: 50%;
      margin: 0 auto 24px;
      animation: spin 1s linear infinite;
    }
    
    .loading-text {
      font-size: 18px;
      font-weight: 600;
      color: var(--text-primary);
      margin-bottom: 8px;
    }
    
    .loading-subtext {
      font-size: 14px;
      color: var(--text-secondary);
    }
    
    /* Results */
    .results-container {
      display: block; /* Changed: Always visible with demo data */
      animation: fadeIn 0.6s ease-out;
    }
    
    .results-container.active {
      display: block;
    }
    
    .results-header {
      text-align: center;
      margin-bottom: 40px;
      padding: 32px;
      background: linear-gradient(135deg, rgba(0, 102, 255, 0.1), rgba(255, 51, 102, 0.1));
      border: 1px solid var(--border);
      border-radius: 16px;
    }
    
    .results-title {
      font-size: 32px;
      font-weight: 800;
      background: linear-gradient(135deg, var(--primary), var(--accent));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 12px;
    }
    
    .results-subtitle {
      color: var(--text-secondary);
      font-size: 16px;
    }
    
    .results-actions {
      display: flex;
      gap: 12px;
      justify-content: center;
      margin-top: 24px;
      flex-wrap: wrap;
    }
    
    .results-grid {
      display: grid;
      gap: 24px;
    }
    
    .result-card {
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: 16px;
      overflow: hidden;
      transition: all 0.3s ease;
    }
    
    .result-card:hover {
      border-color: var(--border-light);
      box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.3);
    }
    
    .result-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 20px 24px;
      background: rgba(0, 102, 255, 0.05);
      border-bottom: 1px solid var(--border);
    }
    
    .result-title {
      font-size: 18px;
      font-weight: 700;
      color: var(--text-primary);
    }
    
    .copy-btn {
      padding: 8px 16px;
      background: var(--bg-input);
      border: 1px solid var(--border);
      border-radius: 8px;
      color: var(--text-secondary);
      font-size: 13px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s ease;
    }
    
    .copy-btn:hover {
      background: var(--primary);
      color: white;
      border-color: var(--primary);
    }
    
    .result-content {
      padding: 24px;
      font-family: 'JetBrains Mono', monospace;
      font-size: 13px;
      line-height: 1.8;
      color: var(--text-primary);
      white-space: pre-wrap;
      overflow-x: auto;
    }
    
    /* Toast */
    .toast {
      position: fixed;
      bottom: 24px;
      right: 24px;
      padding: 16px 24px;
      background: var(--bg-card);
      border: 2px solid var(--success);
      border-radius: 12px;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
      display: flex;
      align-items: center;
      gap: 12px;
      z-index: 1000;
      opacity: 0;
      transform: translateY(20px);
      transition: all 0.3s ease;
      pointer-events: none;
    }
    
    .toast.show {
      opacity: 1;
      transform: translateY(0);
      pointer-events: auto;
    }
    
    .toast-icon {
      font-size: 20px;
    }
    
    .toast-text {
      font-size: 14px;
      font-weight: 600;
      color: var(--text-primary);
    }
    
    /* URL Input Groups */
    .url-input-group {
      position: relative;
    }
    
    .btn-icon-only {
      background: rgba(255, 51, 102, 0.1);
      border: 1px solid var(--accent);
      color: var(--accent);
      padding: 8px;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 16px;
    }
    
    .btn-icon-only:hover {
      background: var(--accent);
      transform: scale(1.1);
    }
    
    /* Animations */
    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    @keyframes fadeInDown {
      from {
        opacity: 0;
        transform: translateY(-30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    /* Responsive */
    @media (max-width: 768px) {
      .container {
        padding: 24px 16px;
      }
      
      .wizard-nav {
        flex-direction: column;
      }
      
      .wizard-step {
        max-width: 100%;
      }
      
      .form-grid {
        grid-template-columns: 1fr;
      }
      
      .btn-group {
        flex-direction: column;
      }
      
      .btn {
        width: 100%;
        justify-content: center;
      }
      
      .results-actions {
        flex-direction: column;
      }
    }
    
    /* V8.1: URL PREVIEW */
    .url-preview-container {
      margin-top: 16px;
      padding: 16px;
      background: rgba(0, 102, 255, 0.05);
      border: 1px solid rgba(0, 102, 255, 0.2);
      border-radius: 12px;
      animation: fadeIn 0.3s ease-out;
    }
    
    .url-preview-label {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 13px;
      font-weight: 600;
      color: var(--text-secondary);
      margin-bottom: 8px;
    }
    
    .url-preview-display {
      font-family: 'JetBrains Mono', monospace;
      font-size: 14px;
      color: var(--primary);
      padding: 10px 14px;
      background: var(--bg-input);
      border-radius: 8px;
      border: 1px solid var(--border-light);
      word-break: break-all;
    }
    
    .url-preview-display .domain {
      color: var(--text-primary);
      font-weight: 600;
    }
    
    .url-preview-display .path {
      color: var(--accent);
      font-weight: 500;
    }

    /* V8.1: SEMANTIC BADGE */
    .semantic-badge {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 16px;
      background: linear-gradient(135deg, rgba(0, 208, 132, 0.1), rgba(0, 102, 255, 0.1));
      border: 1px solid rgba(0, 208, 132, 0.3);
      border-radius: 12px;
      margin-bottom: 24px;
      animation: fadeIn 0.4s ease-out;
    }
    
    .semantic-badge-icon {
      font-size: 28px;
      flex-shrink: 0;
    }
    
    .semantic-badge-content {
      flex: 1;
    }
    
    .semantic-badge-title {
      font-size: 14px;
      font-weight: 700;
      color: var(--success);
      margin-bottom: 4px;
    }
    
    .semantic-badge-text {
      font-size: 12px;
      color: var(--text-secondary);
      line-height: 1.4;
    }
  </style>
</head>
<body>
  <div class="bg-animated"></div>
  
  <div class="container">
    <!-- Header -->
    <div class="header">
      <h1>Ads Engine Pro V8 TOP</h1>
      <p>Sistema Profesional de Francisco Blanco - Consultor Google Ads</p>
      <div class="badge">üöÄ V8 TOP ¬∑ Software SaaS Campa√±as Google Ads ¬∑ Sin Canibalizaci√≥n ¬∑ Validaci√≥n Total</div>
    </div>
    
    <!-- Info Banner -->
    <div style="background: linear-gradient(135deg, rgba(0, 208, 132, 0.1), rgba(0, 102, 255, 0.1)); border: 2px solid var(--success); border-radius: 12px; padding: 20px; margin-bottom: 32px; text-align: center;">
      <div style="font-size: 18px; font-weight: 700; color: var(--success); margin-bottom: 8px;">
        ‚úÖ Ads Engine Pro V8 TOP ‚Äî Versi√≥n Comercial Definitiva
      </div>
      <div style="color: var(--text-secondary); font-size: 14px; line-height: 1.6;">
        Software SaaS de setup Google Ads: 1 Pa√≠s + 1 Ciudad ¬∑ Hasta 6 grupos de anuncios ¬∑ Sin canibalizaci√≥n de keywords ¬∑ URLs inteligentes por grupo
      </div>
    </div>
    
    <!-- Wizard Navigation -->
    <div class="wizard-nav">
      <div class="wizard-step active" onclick="goToStep(1)">
        <div class="step-number">1</div>
        <div class="step-title">Negocio</div>
      </div>
      <div class="wizard-step" onclick="goToStep(2)">
        <div class="step-number">2</div>
        <div class="step-title">Campa√±a</div>
      </div>
      <div class="wizard-step" onclick="goToStep(3)">
        <div class="step-number">3</div>
        <div class="step-title">Targeting</div>
      </div>
      <div class="wizard-step" onclick="goToStep(4)">
        <div class="step-number">4</div>
        <div class="step-title">Presupuesto</div>
      </div>
      <div class="wizard-step" onclick="goToStep(5)">
        <div class="step-number">5</div>
        <div class="step-title">Generaci√≥n</div>
      </div>
    </div>
    
    <!-- Step 1: Business Information - ENHANCED STRUCTURED FORM -->
    <div class="step-content active" id="step1">
      <div class="card">
        <div class="card-title">üìã Informaci√≥n del Negocio</div>
        <div class="card-subtitle">Formulario estructurado para generar campa√±as de m√°xima calidad</div>
        
        <div class="form-group">
          <label class="form-label form-label-required">Nombre del Negocio</label>
          <input type="text" id="businessName" class="form-input" placeholder="Ej: Ecool Barcelona">
          <div class="form-hint">Nombre de tu empresa o marca</div>
        </div>
        
        <div class="form-group">
          <label class="form-label form-label-required">Sector/Industria</label>
          <select id="industry" class="form-select">
            <option value="">Selecciona una industria...</option>
            <option value="ecommerce">E-commerce / Retail</option>
            <option value="servicios">Servicios Profesionales</option>
            <option value="tecnologia">Tecnolog√≠a / Software</option>
            <option value="salud">Salud / Bienestar</option>
            <option value="educacion">Educaci√≥n / Formaci√≥n</option>
            <option value="inmobiliaria">Inmobiliaria</option>
            <option value="automocion">Automoci√≥n</option>
            <option value="hosteleria">Hosteler√≠a / Turismo</option>
            <option value="finanzas">Finanzas / Seguros</option>
            <option value="construccion">Construcci√≥n / Reformas</option>
            <option value="legal">Legal / Abogac√≠a</option>
            <option value="otro">Otro</option>
          </select>
        </div>
        
        <div class="form-group">
          <label class="form-label form-label-required">üì¶ ¬øQu√© productos o servicios vendes?</label>
          <textarea id="products" class="form-textarea" placeholder="Ej: Ropa de marca premium, calzado deportivo, complementos de moda"></textarea>
          <div class="form-hint">Describe tus productos/servicios principales. <strong>Esto se usar√° para generar KEYWORDS</strong></div>
        </div>
        
        <div class="form-group">
          <label class="form-label">üè∑Ô∏è Marcas que vendes (si aplica)</label>
          <input type="text" id="brands" class="form-input" placeholder="Ej: Calvin Klein, Tommy Hilfiger, Guess, Armani Exchange">
          <div class="form-hint">Separa las marcas por comas. D√©jalo vac√≠o si no vendes marcas espec√≠ficas</div>
        </div>
        
        <div class="form-group">
          <label class="form-label form-label-required">üë• P√∫blico Objetivo</label>
          <textarea id="targetAudience" class="form-textarea" placeholder="Ej: J√≥venes 18-35 a√±os, hombres y mujeres, interesados en moda urbana"></textarea>
          <div class="form-hint">Define tu audiencia ideal (edad, g√©nero, intereses)</div>
        </div>
      </div>
      
      <!-- FORTALEZAS SEPARADAS - SOLO PARA ANUNCIOS -->
      <div class="card" style="border: 2px solid var(--success); background: linear-gradient(135deg, rgba(0, 208, 132, 0.05), rgba(0, 102, 255, 0.05));">
        <div class="card-title">üíé Fortalezas de tu Negocio</div>
        <div class="card-subtitle" style="color: var(--success);">
          ‚ö†Ô∏è <strong>IMPORTANTE:</strong> Esta informaci√≥n se usar√° SOLO para crear anuncios atractivos, NO para keywords
        </div>
        
        <div class="form-grid">
          <div class="form-group">
            <label class="form-label">‚úì Env√≠o Gratis</label>
            <div style="display: flex; gap: 12px; align-items: center;">
              <input type="checkbox" id="strength_shipping" style="width: 20px; height: 20px;">
              <span style="flex: 1;">Ofrezco env√≠o gratis desde</span>
              <input type="number" id="strength_shipping_amount" class="form-input" placeholder="50" style="max-width: 80px;" disabled>
              <span>‚Ç¨</span>
            </div>
          </div>
          
          <div class="form-group">
            <label class="form-label">‚úì A√±os de Experiencia</label>
            <div style="display: flex; gap: 12px; align-items: center;">
              <input type="checkbox" id="strength_experience" style="width: 20px; height: 20px;">
              <input type="number" id="strength_experience_years" class="form-input" placeholder="20" style="max-width: 80px;" disabled>
              <span>a√±os de experiencia</span>
            </div>
          </div>
        </div>
        
        <div class="form-group">
          <label class="form-label">‚úì Cambios y Devoluciones</label>
          <div style="display: flex; gap: 12px; align-items: center;">
            <input type="checkbox" id="strength_returns" style="width: 20px; height: 20px;">
            <input type="text" id="strength_returns_text" class="form-input" placeholder="Ej: Cambio de talla gratuito" disabled>
          </div>
        </div>
        
        <div class="form-group">
          <label class="form-label">‚úì Atenci√≥n al Cliente</label>
          <div style="display: flex; gap: 12px; align-items: center;">
            <input type="checkbox" id="strength_support" style="width: 20px; height: 20px;">
            <input type="text" id="strength_support_text" class="form-input" placeholder="Ej: Atenci√≥n personalizada" disabled>
            <input type="tel" id="strength_support_phone" class="form-input" placeholder="696308086" style="max-width: 140px;" disabled>
          </div>
        </div>
        
        <div class="form-group">
          <label class="form-label">‚úì Otras Fortalezas</label>
          <div class="form-hint" style="margin-bottom: 8px; padding: 12px; background: rgba(255, 149, 0, 0.15); border-radius: 8px; border-left: 3px solid var(--warning); color: var(--text-primary);">
            <strong>‚ö†Ô∏è Campo obligatorio</strong> ‚Äî A√±ade 5‚Äì10 fortalezas reales del cliente. La IA no puede inventar datos; si lo dejas vac√≠o, los anuncios ser√°n gen√©ricos.
          </div>
          <textarea id="strength_other" class="form-textarea" placeholder="Ej: 25 a√±os experiencia, Especialistas certificados, Urgencias 24/7, Primera consulta gratis, Garant√≠a 2 a√±os..." rows="3"></textarea>
          <div class="form-hint">A√±ade otras ventajas que quieras destacar en los anuncios</div>
        </div>
      </div>
      
      <!-- ENHANCED: Multiple URL Analysis Card -->
      <div class="card url-card">
        <div class="card-title">üöÄ An√°lisis Inteligente de URLs (Opcional pero Recomendado)</div>
        <div class="card-subtitle">Agrega hasta 7 URLs de tu sitio ‚Äî el software extrae contenido real para campa√±as m√°s precisas</div>
        
        <div id="urlInputsContainer">
          <div class="form-group url-input-group">
            <label class="form-label">URL Principal (Landing Page)</label>
            <div style="display: flex; gap: 8px; align-items: flex-start;">
              <input type="url" class="form-input url-input" placeholder="https://ejemplo.com/producto" data-url-index="0">
              <button type="button" class="btn-icon-only" onclick="removeUrlInput(0)" style="display: none; min-width: 40px;">‚ùå</button>
            </div>
            <div class="form-hint">Tu p√°gina de aterrizaje principal</div>
          </div>
        </div>
        
        <button type="button" class="btn btn-secondary" onclick="addUrlInput()" id="addUrlBtn" style="width: 100%; margin-top: 12px;">
          <span class="btn-icon">+</span> Agregar otra URL ‚Äî M√°x. 7 URLs (Servicios, Blog, Sobre Nosotros...)
        </button>
        
        <div class="form-hint" style="margin-top: 16px; padding: 12px; background: rgba(0, 208, 132, 0.1); border-radius: 8px; border-left: 3px solid var(--success);">
          üí° <strong>¬øPor qu√© m√∫ltiples URLs?</strong><br>
          Al analizar varias p√°ginas (servicios, blog, testimonios), el software obtiene una visi√≥n 360¬∞ de tu negocio para crear:
          <ul style="margin: 8px 0 0 20px; color: var(--text-secondary);">
            <li>Keywords m√°s variadas y espec√≠ficas extra√≠das del contenido real</li>
            <li>Anuncios que conectan mejor con cada tipo de cliente</li>
            <li>Extensiones basadas en contenido real de tu web</li>
            <li>URLs asignadas por grupo seg√∫n relevancia sem√°ntica</li>
          </ul>
        </div>
        
        <div id="urlStatus" style="display: none; margin-top: 12px;"></div>
      </div>
      
      <div class="btn-group">
        <button class="btn btn-primary" onclick="nextStep()">
          Siguiente <span class="btn-icon">‚Üí</span>
        </button>
      </div>
    </div>
    
    <!-- Step 2: Campaign Configuration -->
    <div class="step-content" id="step2">
      <div class="card">
        <div class="card-title">Configuraci√≥n de la Campa√±a</div>
        <div class="card-subtitle">Define los par√°metros b√°sicos de tu campa√±a</div>
        
        <div class="form-grid">
          <div class="form-group">
            <label class="form-label form-label-required">Nombre de la Campa√±a</label>
            <input type="text" id="campaignName" class="form-input" placeholder="Ej: Search_Software_Gestion_2024">
            <div class="form-hint">Usa un nombre descriptivo y √∫nico</div>
          </div>
          
          <div class="form-group">
            <label class="form-label form-label-required">Tipo de Campa√±a</label>
            <select id="campaignType" class="form-select">
              <option value="search">B√∫squeda (Recomendado - Control Total)</option>
              <!-- Opciones deshabilitadas: Performance Max, Display, Video, Shopping -->
              <!-- Solo generamos campa√±as de b√∫squeda para garantizar control total -->
              <!-- Performance Max y otras requieren configuraci√≥n manual en Google Ads -->
            </select>
            <div class="form-hint">Ads Engine Pro genera campa√±as de b√∫squeda manuales para control total de keywords y anuncios</div>
          </div>
        </div>
        
        <div class="form-group">
          <label class="form-label form-label-required">Objetivo Principal</label>
          <select id="campaignGoal" class="form-select">
            <option value="leads">Generaci√≥n de Leads</option>
            <option value="sales">Ventas Directas</option>
            <option value="traffic">Tr√°fico Web</option>
            <option value="brand">Reconocimiento de Marca</option>
            <option value="app">Instalaciones de App</option>
          </select>
        </div>
        

      </div>
      
      <div class="btn-group">
        <button class="btn btn-secondary" onclick="prevStep()">
          <span class="btn-icon">‚Üê</span> Anterior
        </button>
        <button class="btn btn-primary" onclick="nextStep()">
          Siguiente <span class="btn-icon">‚Üí</span>
        </button>
      </div>
    </div>
    
    <!-- Step 3: Targeting -->
    <div class="step-content" id="step3">
      <div class="card">
        <div class="card-title">Segmentaci√≥n y Targeting</div>
        <div class="card-subtitle">Define d√≥nde y a qui√©n mostrar tus anuncios</div>
        
        <div class="form-grid">
          <div class="form-group">
            <label class="form-label form-label-required">üåç Pa√≠s</label>
            <input type="text" id="targetCountry" class="form-input" placeholder="Ej: Espa√±a (m√°x. 25 caracteres)" maxlength="25">
            <div class="form-hint"><strong>1 pa√≠s por campa√±a</strong> para m√°xima precisi√≥n</div>
          </div>
          
          <div class="form-group">
            <label class="form-label form-label-required">Idioma</label>
            <select id="language" class="form-select">
              <option value="es">Espa√±ol</option>
              <option value="en">Ingl√©s</option>
              <option value="fr">Franc√©s</option>
              <option value="de">Alem√°n</option>
              <option value="it">Italiano</option>
              <option value="pt">Portugu√©s</option>
            </select>
          </div>
        </div>
        
        <div class="form-group" style="margin-top: 24px;">
          <label class="form-label">üèôÔ∏è Ciudad (Opcional - Solo 1)</label>
          <input type="text" id="targetCities" class="form-input" placeholder="Ej: Barcelona (m√°x. 30 caracteres)" maxlength="30">
          <div class="form-hint">
            <strong>Campa√±a LOCAL:</strong> Escribe 1 ciudad (m√°x. 30 caracteres) ‚Üí <code style="background: rgba(0,208,132,0.1); padding: 2px 6px; border-radius: 3px; color: var(--success);">Barcelona (radio 20km)</code><br>
            <strong>Campa√±a NACIONAL:</strong> Deja este campo vac√≠o ‚Üí Anuncios en todo el pa√≠s<br>
            ‚ùå <code style="background: rgba(255,51,102,0.1); padding: 2px 6px; border-radius: 3px; color: var(--accent);">Madrid y Barcelona</code> (m√∫ltiples ciudades bloqueadas)
          </div>
        </div>
        
        <div class="form-group" style="margin-top: 24px;">
          <label class="form-label">Palabras Clave Base (opcional)</label>
          <textarea id="baseKeywords" class="form-textarea" placeholder="software gesti√≥n&#10;crm empresas&#10;automatizaci√≥n procesos"></textarea>
          <div class="form-hint">Una keyword por l√≠nea. Si no pones ninguna, la IA las generar√° autom√°ticamente.</div>
        </div>
        
        <div class="form-group">
          <label class="form-label">Palabras Clave Negativas (opcional)</label>
          <textarea id="negativeKeywords" class="form-textarea" placeholder="gratis&#10;free&#10;crack"></textarea>
          <div class="form-hint">Keywords que NO quieres que activen tus anuncios</div>
        </div>
      </div>
      
      <div class="btn-group">
        <button class="btn btn-secondary" onclick="prevStep()">
          <span class="btn-icon">‚Üê</span> Anterior
        </button>
        <button class="btn btn-primary" onclick="nextStep()">
          Siguiente <span class="btn-icon">‚Üí</span>
        </button>
      </div>
    </div>
    
    <!-- Step 4: Budget & Bidding -->
    <div class="step-content" id="step4">
      <div class="card">
        <div class="card-title">Presupuesto y Estrategia de Puja</div>
        <div class="card-subtitle">Define tu inversi√≥n y estrategia de puja</div>
        
        <div class="form-grid">
          <div class="form-group">
            <label class="form-label form-label-required">Presupuesto Diario (‚Ç¨)</label>
            <input type="number" id="dailyBudget" class="form-input" placeholder="50" min="1" step="1">
            <div class="form-hint">M√≠nimo recomendado: 20‚Ç¨/d√≠a</div>
          </div>
          
          <div class="form-group">
            <label class="form-label form-label-required">CPC Estimado (‚Ç¨)</label>
            <input type="number" id="estimatedCPC" class="form-input" placeholder="1.50" min="0.01" step="0.01">
            <div class="form-hint">CPC medio de tu industria</div>
          </div>
        </div>
        
        <div class="form-group">
          <label class="form-label form-label-required">Estrategia de Puja</label>
          <select id="bidStrategy" class="form-select">
            <option value="maximize_conversions">Maximizar Conversiones</option>
            <option value="target_cpa">CPA Objetivo</option>
            <option value="target_roas">ROAS Objetivo</option>
            <option value="maximize_clicks">Maximizar Clics</option>
            <option value="manual_cpc">CPC Manual</option>
          </select>
        </div>
        
        <div class="form-grid">
          <div class="form-group">
            <label class="form-label form-label-required">Tasa de Conversi√≥n Web (%)</label>
            <input type="number" id="conversionRate" class="form-input" placeholder="5" min="0.1" step="0.1">
            <div class="form-hint">% de visitantes que convierten</div>
          </div>
          
          <div class="form-group">
            <label class="form-label form-label-required">Ticket Medio (‚Ç¨)</label>
            <input type="number" id="avgTicket" class="form-input" placeholder="500" min="1" step="1">
            <div class="form-hint">Valor medio de venta</div>
          </div>
        </div>
      </div>
      
      <div class="btn-group">
        <button class="btn btn-secondary" onclick="prevStep()">
          <span class="btn-icon">‚Üê</span> Anterior
        </button>
        <button class="btn btn-primary" onclick="nextStep()">
          Siguiente <span class="btn-icon">‚Üí</span>
        </button>
      </div>
    </div>
    
    <!-- Step 5: Generation -->
    <div class="step-content" id="step5">
      <div class="card">
        <div class="card-title">Configuraci√≥n de Campa√±a</div>
        <div class="card-subtitle">Ajusta los par√°metros finales antes de generar</div>
        
        <div class="form-group">
          <label class="form-label">N√∫mero de Grupos de Anuncios</label>
          <input type="number" id="numAdGroups" class="form-input" value="3" min="1" max="6">
          <div class="form-hint">Recomendado: 3-5 grupos ¬∑ <strong>M√°ximo: 6 grupos</strong> para rendimiento √≥ptimo sin canibalizaci√≥n</div>
        </div>
        
        <div class="form-group">
          <label class="form-label">Keywords por Grupo</label>
          <input type="number" id="keywordsPerGroup" class="form-input" value="10" min="5" max="30">
          <div class="form-hint">Recomendado: 10-15 keywords por grupo</div>
        </div>
        
        <div class="form-group">
          <label class="form-label">Anuncios por Grupo</label>
          <input type="number" id="adsPerGroup" class="form-input" value="3" min="2" max="5">
          <div class="form-hint">M√≠nimo 2, recomendado 3</div>
        </div>
      </div>
      
      <div class="form-group">
        <label class="form-label">Palabras Clave Base (opcional)</label>
        <textarea id="baseKeywords" class="form-textarea" placeholder="software gesti√≥n, crm empresas, automatizaci√≥n procesos"></textarea>
        <div class="form-hint">Separa las keywords por comas. Si no pones ninguna, la IA las generar√° autom√°ticamente.</div>
      </div>
      
      <div class="form-group">
        <label class="form-label">Palabras Clave Negativas (opcional)</label>
        <textarea id="negativeKeywords" class="form-textarea" placeholder="gratis, free, crack, pirata"></textarea>
        <div class="form-hint">Keywords que NO quieres que activen tus anuncios (separadas por comas)</div>
      </div>
      
      <div class="btn-group">
        <button class="btn btn-secondary" onclick="prevStep()">
          <span class="btn-icon">‚Üê</span> Anterior
        </button>
        <button class="btn btn-primary" onclick="generateCampaign()">
          <span class="btn-icon">‚ú®</span> Generar Campa√±a
        </button>
      </div>
    </div>
    
    <!-- Loading State -->
    <div class="loading-container" id="loadingState">
      <div class="loader"></div>
      <div class="loading-text" id="loadingText">Generando tu campa√±a...</div>
      <div class="loading-subtext" id="loadingSubtext">Esto puede tardar 30-60 segundos</div>
    </div>
    
    <!-- Results -->
    <div class="results-container" id="resultsContainer">
      <div class="results-header">
        <div class="results-title">üì§ Herramientas de Exportaci√≥n</div>
        <div class="results-subtitle">Genera tu campa√±a usando el formulario arriba. Una vez generada, podr√°s exportarla en m√∫ltiples formatos</div>
        <div class="results-actions">
          <button class="btn btn-primary" onclick="exportForGoogleAdsEditor()">
            <span class="btn-icon">üöÄ</span> Google Ads Editor
          </button>
          <button class="btn btn-primary" onclick="exportToExcel()">
            <span class="btn-icon">üìä</span> Excel Completo
          </button>
          <button class="btn btn-primary" onclick="exportCompleteCSV()">
            <span class="btn-icon">üì•</span> CSV Completo
          </button>
          <button class="btn btn-secondary" onclick="exportKeywordsCSV()">
            <span class="btn-icon">üîë</span> Solo Keywords
          </button>
          <button class="btn btn-secondary" onclick="exportAdsCSV()">
            <span class="btn-icon">üìù</span> Solo Anuncios
          </button>
          <button class="btn btn-secondary" onclick="showImportInstructions()">
            <span class="btn-icon">üìñ</span> C√≥mo Importar
          </button>
          <button class="btn btn-secondary" onclick="exportToText()">
            <span class="btn-icon">üìã</span> Copiar Todo
          </button>
          <button class="btn btn-warning" onclick="mostrarPalabrasNegativas()" style="background: linear-gradient(135deg, var(--warning), var(--accent)); border: none;">
            <span class="btn-icon">üö´</span> Palabras Negativas
          </button>
          <button class="btn btn-secondary" onclick="resetAndStart()">
            <span class="btn-icon">üîÑ</span> Nueva Campa√±a
          </button>
        </div>
      </div>
      
      <!-- V8.1: SEMANTIC BADGE -->
      <div class="semantic-badge">
        <div class="semantic-badge-icon">üß†</div>
        <div class="semantic-badge-content">
          <div class="semantic-badge-title">‚úÖ Optimizado para Google Ads 2025-2026</div>
          <div class="semantic-badge-text">Structured Snippets con b√∫squedas sem√°nticas, intenci√≥n de usuario y micro-momentos de Google</div>
        </div>
      </div>
      
      <div class="results-grid" id="resultsGrid"></div>
    </div>
  </div>
  
  <!-- Toast Notification -->
  <div class="toast" id="toast">
    <div class="toast-icon">‚úÖ</div>
    <div class="toast-text" id="toastText">Acci√≥n completada</div>
  </div>
  
  <script>
    let currentStep = 1;
    let formData = {};
    let generatedCampaign = null;
    let urlContent = null; // NEW: Store analyzed URL content

    // PALABRAS NEGATIVAS - Lista completa (258 palabras)
    const PALABRAS_NEGATIVAS = [
      "a mano",
      "ai",
      "aleman",
      "antonimo",
      "antonimos",
      "asequible",
      "asignatura",
      "asignaturas",
      "atrapalo",
      "avi",
      "azw",
      "azw3",
      "bajo precio",
      "bajos precios",
      "barata",
      "baratas",
      "barato",
      "baratos",
      "barcelona",
      "beca",
      "becario",
      "becas",
      "bilbao",
      "blog",
      "blogs",
      "casero",
      "caseros",
      "chollo",
      "chollometro",
      "chollos",
      "clase",
      "clases",
      "codigo descuento",
      "como",
      "comparador",
      "comparar",
      "concepto",
      "conceptos",
      "copia",
      "copiada",
      "copiadas",
      "copiado",
      "copiados",
      "copias",
      "coru√±a",
      "csv",
      "cupon",
      "cupones",
      "curso",
      "cursos",
      "cv",
      "de imitacion",
      "definicion",
      "descuento",
      "descuentos",
      "divx",
      "doc",
      "docm",
      "docx",
      "dosier",
      "dosieres",
      "dossier",
      "dossieres",
      "ebook",
      "economica",
      "economicas",
      "economico",
      "economicos",
      "ejemplo",
      "ejemplos",
      "empleo",
      "empleos",
      "en casa",
      "enga√±o",
      "enga√±os",
      "english",
      "epub",
      "estafa",
      "estafada",
      "estafadas",
      "estafador",
      "estafadores",
      "estafas",
      "estudio",
      "estudios",
      "facebook",
      "fake",
      "falsa",
      "falsas",
      "falsificacion",
      "falsificado",
      "falso",
      "falsos",
      "fb",
      "foro",
      "foros",
      "foto",
      "fotografia",
      "fotografias",
      "fotolia",
      "frances",
      "fraude",
      "fraudes",
      "fraudulenta",
      "fraudulentas",
      "fraudulento",
      "fraudulentos",
      "french",
      "ganga",
      "gangas",
      "german",
      "gif",
      "granada",
      "gratis",
      "gratuita",
      "gratuitamente",
      "gratuito",
      "groupalia",
      "groupon",
      "guia",
      "guias",
      "herramienta",
      "herramientas",
      "ico",
      "imagen",
      "imagenes",
      "imitacion",
      "imitaciones",
      "imitado",
      "imitados",
      "infojobs",
      "ingles",
      "insta",
      "instagram",
      "instruccion",
      "instrucciones",
      "invento",
      "inventor",
      "job",
      "jobs",
      "jpeg",
      "jpg",
      "key",
      "lets bonus",
      "letsbonus",
      "linkedin",
      "lista",
      "listado",
      "listados",
      "lit",
      "low cost",
      "madrid",
      "malaga",
      "manual",
      "manuales",
      "master",
      "masters",
      "mobi",
      "mov",
      "mp4",
      "mpeg",
      "mpg",
      "murcia",
      "ocasion",
      "oferta",
      "ofertas",
      "opinion",
      "opiniones",
      "pages",
      "palma",
      "palmas",
      "pdf",
      "pinterest",
      "pirata",
      "piratas",
      "pirateria",
      "plagiada",
      "plagiadas",
      "plagiado",
      "plagiados",
      "plagio",
      "png",
      "podcast",
      "porno",
      "pornografia",
      "portal",
      "portales",
      "portfolio",
      "portfolios",
      "pps",
      "ppsx",
      "ppt",
      "pptm",
      "pptx",
      "practica",
      "practicas",
      "presentacion",
      "presentaciones",
      "promocion",
      "proyecto",
      "proyectos",
      "psd",
      "pub",
      "que es",
      "quien",
      "rebaja",
      "rebajada",
      "rebajado",
      "rebajas",
      "recursos humanos",
      "remedio",
      "remedios",
      "rrhh",
      "saber",
      "sevilla",
      "sexo",
      "sexual",
      "sexuales",
      "significado",
      "sin coste",
      "sin costo",
      "sinonimo",
      "sinonimos",
      "slideshare",
      "snapchat",
      "tif",
      "timo",
      "timos",
      "trabajando",
      "trabajar",
      "trabajo",
      "trabajos",
      "traduccion",
      "traducir",
      "traductor",
      "tutorial",
      "tutoriales",
      "twitter",
      "txt",
      "universidad",
      "universitaria",
      "universitarias",
      "universitario",
      "universitarios",
      "valencia",
      "video",
      "videos",
      "vitae",
      "wiki",
      "wikipedia",
      "wmv",
      "xls",
      "xlsx",
      "xml",
      "xps",
      "xxx",
      "youtube",
      "zaragoza"
];
    
    // Funci√≥n para mostrar palabras negativas
    function mostrarPalabrasNegativas() {
      const modal = `
        <div style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 10000; display: flex; align-items: center; justify-content: center; padding: 20px;">
          <div style="background: var(--bg-card); border: 2px solid var(--primary); border-radius: 16px; max-width: 900px; width: 100%; max-height: 90vh; overflow: hidden; display: flex; flex-direction: column;">
            <div style="padding: 24px; border-bottom: 1px solid var(--border);">
              <h2 style="margin: 0 0 8px 0; color: var(--text-primary); font-size: 24px;">üö´ Palabras Negativas (258)</h2>
              <p style="margin: 0; color: var(--text-secondary); font-size: 14px;">Lista completa de palabras negativas para filtrar tr√°fico no deseado</p>
            </div>
            
            <div style="padding: 24px; overflow-y: auto; flex: 1;">
              <div style="background: rgba(255, 149, 0, 0.1); border-left: 3px solid var(--warning); padding: 16px; margin-bottom: 20px; border-radius: 8px;">
                <strong style="color: var(--warning);">‚ö†Ô∏è IMPORTANTE:</strong>
                <p style="margin: 8px 0 0 0; color: var(--text-secondary); font-size: 14px;">
                  Esta lista contiene 258 palabras negativas habituales. <strong>Rev√≠sala y personal√≠zala seg√∫n tu nicho</strong>. 
                  Elimina las que no apliquen a tu negocio y a√±ade las espec√≠ficas de tu sector.
                </p>
              </div>
              
              <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 8px; margin-bottom: 20px;">
                ${PALABRAS_NEGATIVAS.map((palabra, i) => 
                  '<div style="padding: 8px 12px; background: var(--bg-input); border: 1px solid var(--border); border-radius: 6px; font-size: 13px; font-family: \'JetBrains Mono\', monospace;">' + 
                  '<span style="color: var(--text-muted); margin-right: 8px;">' + (i+1) + '.</span>' +
                  '<span style="color: var(--text-primary);">' + palabra + '</span>' +
                  '</div>'
                ).join('')}
              </div>
            </div>
            
            <div style="padding: 20px; border-top: 1px solid var(--border); display: flex; gap: 12px;">
              <button onclick="copiarPalabrasNegativas()" style="flex: 1; padding: 12px 24px; background: var(--primary); color: white; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; font-size: 14px;">
                üìã Copiar Todas
              </button>
              <button onclick="descargarPalabrasNegativas()" style="flex: 1; padding: 12px 24px; background: var(--success); color: white; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; font-size: 14px;">
                üíæ Descargar CSV
              </button>
              <button onclick="cerrarModalNegativas()" style="padding: 12px 24px; background: var(--bg-input); color: var(--text-primary); border: 1px solid var(--border); border-radius: 8px; font-weight: 600; cursor: pointer; font-size: 14px;">
                ‚úï Cerrar
              </button>
            </div>
          </div>
        </div>
      `;
      
      document.body.insertAdjacentHTML('beforeend', modal);
    }
    
    function cerrarModalNegativas() {
      const modals = document.querySelectorAll('[style*="z-index: 10000"]');
      modals.forEach(m => m.remove());
    }
    
    function copiarPalabrasNegativas() {
      const texto = PALABRAS_NEGATIVAS.join('\n');
      navigator.clipboard.writeText(texto).then(() => {
        showToast('‚úÖ 258 palabras negativas copiadas al portapapeles');
      }).catch(() => {
        showToast('‚ùå Error al copiar', 'error');
      });
    }
    
    function descargarPalabrasNegativas() {
      let csv = 'Keyword\n';
      PALABRAS_NEGATIVAS.forEach(palabra => {
        csv += palabra + '\n';
      });
      
      const filename = 'Palabras_Negativas_Google_Ads.csv';
      downloadFile(csv, filename, 'text/csv;charset=utf-8');
      showToast('‚úÖ CSV de palabras negativas descargado');
    }

    
    
    // INTENT-BASED SEARCH STRUCTURE (NO KEYWORD VARIATIONS)
    // Campaigns are generated by user intent, not exhaustive keyword lists.
    // Intent groups: Problem, Solution, Product/Service, Competitor, Brand.
    // Keywords are representative and broad to signal intent.

    const INTENT_GROUPS = [
      { id: "problem", label: "Problema" },
      { id: "solution", label: "Soluci√≥n" },
      { id: "product", label: "Producto / Servicio" },
      { id: "competitor", label: "Competencia" },
      { id: "brand", label: "Marca" }
    ];

    function generateIntentKeywords(base) {
      return [
        { keyword: base, matchType: "BROAD", maxCPC: formData.estimatedCPC?.toString() || "1.50" }
      ];
    }


    // DEMO CAMPAIGN DATA - Pre-loaded example
    const DEMO_CAMPAIGN = {
      "name": "Consultor Google Ads - Servicios Profesionales",
      "type": "Search",
      "goal": "Leads",
      "budget": "25",
      "bidStrategy": "Maximizar conversiones",
      "location": "Espa√±a",
      "language": "Espa√±ol",
      "adGroups": [
        {
          "name": "Consultor Google Ads - Servicios",
          "theme": "Consultor√≠a profesional Google Ads",
          "bid": "2.50",
          "keywords": [
            {"keyword": "consultor google ads", "matchType": "EXACT", "maxCPC": "3.00"},
            {"keyword": "consultor google ads", "matchType": "PHRASE", "maxCPC": "2.80"},
            {"keyword": "experto google ads", "matchType": "PHRASE", "maxCPC": "2.70"},
            {"keyword": "especialista google ads", "matchType": "PHRASE", "maxCPC": "2.60"},
            {"keyword": "consultor sem", "matchType": "PHRASE", "maxCPC": "2.50"},
            {"keyword": "gestor campa√±as google", "matchType": "PHRASE", "maxCPC": "2.40"}
          ],
          "ads": [{
            "headlines": [
              "Consultor Google Ads", "Experto Google Partner", "Campa√±as Rentables",
              "Sin Permanencia", "Resultados Reales", "15 A√±os Experiencia",
              "Auditor√≠a Gratis", "Solo Servicios B2B", "Trato Directo",
              "Optimizaci√≥n Diaria", "ROI Garantizado", "Google Partner 2025",
              "Consultor√≠a Pro", "Leads de Calidad", "Presupuesto Optimizado"
            ],
            "descriptions": [
              "Consultor Google Ads especializado en servicios. Sin permanencia. Auditor√≠a gratis.",
              "Campa√±as rentables para abogados, consultores y profesionales. Trato directo.",
              "Google Partner con 15 a√±os de experiencia. Resultados desde el primer mes.",
              "Optimizo tu inversi√≥n en Google Ads. Solo trabajo con 10 clientes para calidad."
            ],
            "path1": "Consultor", "path2": "GoogleAds",
            "finalUrl": "https://www.franciscoblanco.net"
          }]
        },
        {
          "name": "Campa√±as Google Ads - Gesti√≥n",
          "theme": "Gesti√≥n profesional de campa√±as",
          "bid": "2.30",
          "keywords": [
            {"keyword": "gesti√≥n google ads", "matchType": "PHRASE", "maxCPC": "2.50"},
            {"keyword": "crear campa√±a google ads", "matchType": "PHRASE", "maxCPC": "2.40"},
            {"keyword": "optimizar google ads", "matchType": "PHRASE", "maxCPC": "2.60"},
            {"keyword": "experto campa√±as b√∫squeda", "matchType": "PHRASE", "maxCPC": "2.30"}
          ],
          "ads": [{
            "headlines": [
              "Gesti√≥n Google Ads Pro", "Campa√±as Optimizadas", "Experto en B√∫squeda",
              "Resultados Medibles", "Sin Contratos Largos", "Precio Transparente",
              "Informes Mensuales", "Soporte Directo", "Keywords Rentables",
              "CPC Optimizado", "Quality Score Alto", "Conversiones Reales",
              "Setup Profesional", "Estrategia Clara", "Auditor√≠a Incluida"
            ],
            "descriptions": [
              "Gestiono tu Google Ads con estrategia profesional. Informes claros cada mes.",
              "Especializado en campa√±as de b√∫squeda para servicios. Sin permanencia.",
              "Optimizaci√≥n continua de tus campa√±as. Trato directo, sin intermediarios.",
              "Configuro, gestiono y optimizo tus campa√±as Google Ads. Resultados reales."
            ],
            "path1": "Gestion", "path2": "Campanas",
            "finalUrl": "https://www.franciscoblanco.net"
          }]
        }
      ],
      "negatives": ["gratis", "curso", "formaci√≥n", "aprender", "tutorial", "pdf", "plantilla", "herramienta", "software", "free", "barato", "precio", "coste"],
      "extensions": {
        "sitelinks": [
          {"title": "Consultor√≠a Gratis", "desc": "Primera auditor√≠a sin compromiso", "url": "https://www.franciscoblanco.net"},
          {"title": "Servicios", "desc": "Especializado en servicios B2B", "url": "https://www.franciscoblanco.net/servicios"},
          {"title": "Por Qu√© Yo", "desc": "Sin permanencia, trato directo", "url": "https://www.franciscoblanco.net/por-que-trabajar-conmigo"},
          {"title": "Contacto", "desc": "Hablemos de tu proyecto", "url": "https://www.franciscoblanco.net"}
        ],
        "callouts": [
          "Google Partner Certificado", "Sin Permanencia", "Auditor√≠a Gratis", "Trato Directo",
          "Solo 10 Clientes", "15 A√±os Experiencia", "Especialista Servicios", "Resultados Reales"
        ],
        "snippets": {
          "Servicios": ["Auditor√≠a Google Ads", "Gesti√≥n Campa√±as", "Optimizaci√≥n CPC", "Setup Profesional", "Informes Mensuales"],
          "Especialidades": ["Abogados", "Consultores", "Servicios B2B", "Profesionales", "PYMEs"]
        }
      }
    };
    
    // Load demo campaign on page load - COMENTADO (arranca sin informe)
    /*
    window.addEventListener('DOMContentLoaded', function() {
      generatedCampaign = DEMO_CAMPAIGN;
      formData = {
        dailyBudget: 25,
        estimatedCPC: 2.5,
        conversionRate: 5,
        avgTicket: 600
      };
      displayResults();
      showToast('‚úÖ Campa√±a de ejemplo cargada - Todos los botones funcionan');
    });
    */
    
    // Navigation
    function goToStep(step) {
      if (step < 1 || step > 5) return;
      
      // Validate current step before moving
      if (step > currentStep && !validateStep(currentStep)) {
        return;
      }
      
      // Update step classes
      document.querySelectorAll('.step-content').forEach(el => {
        el.classList.remove('active');
      });
      document.getElementById(`step${step}`).classList.add('active');
      
      document.querySelectorAll('.wizard-step').forEach((el, idx) => {
        el.classList.remove('active');
        if (idx + 1 < step) {
          el.classList.add('completed');
        } else {
          el.classList.remove('completed');
        }
      });
      document.querySelectorAll('.wizard-step')[step - 1].classList.add('active');
      
      currentStep = step;
      
      // Scroll to top
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }
    
    function nextStep() {
      if (validateStep(currentStep)) {
        collectStepData(currentStep);
        goToStep(currentStep + 1);
      }
    }
    
    function prevStep() {
      goToStep(currentStep - 1);
    }
    
    // NEW: Analyze URL function
    async function analyzeURL(url) {
      if (!url || !url.trim()) return null;
      
      try {
        const statusDiv = document.getElementById('urlStatus');
        statusDiv.style.display = 'block';
        statusDiv.innerHTML = '<div class="url-status"><div class="url-loading"></div> Analizando tu p√°gina...</div>';
        
        // Use Jina AI to extract content
        const jinaURL = `https://r.jina.ai/${url}`;
        const response = await fetch(jinaURL, {
          headers: {
            'Accept': 'text/plain',
            'X-Return-Format': 'text'
          }
        });
        
        if (!response.ok) {
          throw new Error('Error al extraer contenido de la URL');
        }
        
        const content = await response.text();
        
        // Limit content to first 8000 characters
        const limitedContent = content.slice(0, 8000);
        
        statusDiv.innerHTML = `
          <div class="url-status">
            ‚úÖ URL analizada correctamente (${Math.round(content.length / 1000)}KB de contenido extra√≠do)
          </div>
        `;
        
        return limitedContent;
      } catch (error) {
        console.error('Error analyzing URL:', error);
        const statusDiv = document.getElementById('urlStatus');
        statusDiv.innerHTML = `
          <div class="url-status" style="background: rgba(255, 149, 0, 0.1); border-color: rgba(255, 149, 0, 0.3); color: var(--warning);">
            ‚ö†Ô∏è No se pudo analizar la URL. Continuaremos sin el an√°lisis.
          </div>
        `;
        return null;
      }
    }
    
    // NEW: Multiple URLs Management
    let urlInputCount = 1;
    
    function addUrlInput() {
      const currentCount = document.querySelectorAll('.url-input').length;
      if (currentCount >= 7) {
        showToast('‚ö†Ô∏è M√°ximo 7 URLs permitidas ‚Äî L√≠mite de rendimiento √≥ptimo', 'warning');
        return;
      }
      
      const container = document.getElementById('urlInputsContainer');
      const newIndex = urlInputCount++;
      
      const newInputGroup = document.createElement('div');
      newInputGroup.className = 'form-group url-input-group';
      newInputGroup.id = `url-group-${newIndex}`;
      newInputGroup.innerHTML = `
        <label class="form-label">URL Adicional ${newIndex} <span style="color: var(--text-muted); font-size: 11px;">(${currentCount + 1}/7)</span></label>
        <div style="display: flex; gap: 8px; align-items: flex-start;">
          <input type="url" class="form-input url-input" placeholder="https://ejemplo.com/servicios" data-url-index="${newIndex}">
          <button type="button" class="btn-icon-only" onclick="removeUrlInput(${newIndex})" style="min-width: 40px;">‚ùå</button>
        </div>
        <div class="form-hint">P√°gina adicional para analizar</div>
      `;
      
      container.appendChild(newInputGroup);
      const remaining = 7 - (currentCount + 1);
      if (remaining === 0) {
        showToast('‚úÖ URL agregada ‚Äî L√≠mite m√°ximo alcanzado (7/7)', 'success');
      } else {
        showToast(`‚úÖ URL agregada (${currentCount + 1}/7) ‚Äî Quedan ${remaining} disponibles`);
      }
    }
    
    function removeUrlInput(index) {
      if (index === 0) return; // No permitir eliminar la URL principal
      
      const group = document.getElementById(`url-group-${index}`);
      if (group) {
        group.remove();
        showToast('üóëÔ∏è URL eliminada');
      }
    }
    
    // NEW: Analyze Multiple URLs
    async function analyzeMultipleURLs() {
      const urlInputs = document.querySelectorAll('.url-input');
      const urls = Array.from(urlInputs)
        .map(input => input.value.trim())
        .filter(url => url !== '');
      
      if (urls.length === 0) return null;
      
      const statusDiv = document.getElementById('urlStatus');
      statusDiv.style.display = 'block';
      statusDiv.innerHTML = `<div class="url-status"><div class="url-loading"></div> Analizando ${urls.length} URL(s)...</div>`;
      
      let allContent = '';
      let successCount = 0;
      
      for (let i = 0; i < urls.length; i++) {
        try {
          const content = await analyzeURL(urls[i]);
          if (content) {
            allContent += `\n\n=== CONTENIDO DE ${urls[i]} ===\n${content}`;
            successCount++;
          }
        } catch (error) {
          console.error(`Error analyzing ${urls[i]}:`, error);
        }
      }
      
      if (successCount > 0) {
        statusDiv.innerHTML = `
          <div class="url-status">
            ‚úÖ ${successCount} de ${urls.length} URLs analizadas correctamente
          </div>
        `;
        return allContent;
      } else {
        statusDiv.innerHTML = `
          <div class="url-status" style="background: rgba(255, 149, 0, 0.1); border-color: rgba(255, 149, 0, 0.3); color: var(--warning);">
            ‚ö†Ô∏è No se pudieron analizar las URLs. Continuaremos sin el an√°lisis.
          </div>
        `;
        return null;
      }
    }
    
    // Validation
    function validateStep(step) {
      switch(step) {
        case 1:
          if (!document.getElementById('businessName').value.trim()) {
            showToast('‚ùå Completa el nombre del negocio', 'error');
            return false;
          }
          if (!document.getElementById('industry').value) {
            showToast('‚ùå Selecciona una industria', 'error');
            return false;
          }
          if (!document.getElementById('products').value.trim()) {
            showToast('‚ùå Describe tus productos/servicios', 'error');
            return false;
          }
          if (!document.getElementById('targetAudience').value.trim()) {
            showToast('‚ùå Define tu p√∫blico objetivo', 'error');
            return false;
          }
          // USP field removed - no longer validated
          return true;
          
        case 2:
          if (!document.getElementById('campaignName').value.trim()) {
            showToast('‚ùå Introduce un nombre de campa√±a', 'error');
            return false;
          }
          
          return true;
          
        case 3:
          const countryValue = document.getElementById('targetCountry').value.trim();
          if (!countryValue) {
            showToast('‚ùå Define un pa√≠s para targeting', 'error');
            return false;
          }
          
          // V8.3: VALIDACI√ìN BLOQUEANTE - SOLO 1 PA√çS
          const countryList = countryValue.split(',').map(c => c.trim()).filter(c => c !== '');
          if (countryList.length > 1) {
            showToast(`‚ùå SOLO 1 PA√çS permitido por campa√±a ‚Äî Elimina ${countryList.length - 1} pa√≠s(es).`, 'error');
            document.getElementById('targetCountry').focus();
            return false;
          }
          
          // V8 CLEAN: VALIDACI√ìN INTELIGENTE - SOLO 1 CIUDAD (con especificaciones locales permitidas)
          const cityValue = document.getElementById('targetCities').value.trim();
          if (cityValue) {
            // Detectar m√∫ltiples ciudades separadas (bloquear esto)
            const hasPipe = cityValue.includes('|');
            const hasComma = cityValue.includes(',');
            const hasSlash = cityValue.includes('/');
            
            // Palabras clave de especificaci√≥n local (espa√±ol, ingl√©s, otros idiomas)
            const localSpecKeywords = [
              'alrededor', 'alrededores', 'surrounding', 'surroundings',
              'zona', 'zone', 'area', '√°rea',
              'periferia', 'periphery', 'outskirts',
              'extrarradio', 'suburban',
              'radio', 'radius', 'km', 'kil√≥metros', 'kilometers',
              'norte', 'sur', 'este', 'oeste', 'north', 'south', 'east', 'west',
              'centro', 'center', 'centre',
              'metropolitana', 'metropolitan', 'metro'
            ];
            
            // Permitir "y alrededores" o "y zona norte" (especificaci√≥n local)
            // Pero bloquear "Barcelona y Madrid" (m√∫ltiples ciudades)
            const hasAnd = cityValue.toLowerCase().includes(' y ') || 
                          cityValue.toLowerCase().includes(' and ');
            
            const isLocalSpec = hasAnd && localSpecKeywords.some(keyword => 
              cityValue.toLowerCase().includes(keyword)
            );
            
            // Tambi√©n permitir si tiene par√©ntesis (ej: "Madrid (radio 20km)")
            const hasParenthesis = cityValue.includes('(') && cityValue.includes(')');
            
            // Bloquear separadores de m√∫ltiples ciudades
            if (hasPipe || hasComma || hasSlash) {
              showToast('‚ùå SOLO 1 CIUDAD permitida ‚Äî Elimina los separadores (|, /, comas)', 'error');
              document.getElementById('targetCities').focus();
              return false;
            }
            
            // Bloquear " y " solo si NO es una especificaci√≥n local Y NO tiene par√©ntesis
            if (hasAnd && !isLocalSpec && !hasParenthesis) {
              showToast('‚ùå SOLO 1 CIUDAD permitida ‚Äî Usa: "Ciudad (radio 20km)" o "Ciudad y alrededores"', 'error');
              document.getElementById('targetCities').focus();
              return false;
            }
          }

          
          return true;
          
        case 4:
          const budgetInput = document.getElementById('dailyBudget').value.trim();
          const cpcInput = document.getElementById('estimatedCPC').value.trim();
          const convRateInput = document.getElementById('conversionRate').value.trim();
          const ticketInput = document.getElementById('avgTicket').value.trim();
          
          // Replace comma with dot for decimal numbers
          const budget = parseFloat(budgetInput.replace(',', '.'));
          const cpc = parseFloat(cpcInput.replace(',', '.'));
          const convRate = parseFloat(convRateInput.replace(',', '.'));
          const ticket = parseFloat(ticketInput.replace(',', '.'));
          
          if (!budgetInput || isNaN(budget) || budget < 1) {
            showToast('‚ùå Introduce un presupuesto diario v√°lido (m√≠nimo 1‚Ç¨)', 'error');
            return false;
          }
          if (!cpcInput || isNaN(cpc) || cpc < 0.01) {
            showToast('‚ùå Introduce un CPC estimado v√°lido (m√≠nimo 0.01‚Ç¨)', 'error');
            return false;
          }
          if (!convRateInput || isNaN(convRate) || convRate < 0.1) {
            showToast('‚ùå Introduce una tasa de conversi√≥n v√°lida (m√≠nimo 0.1%)', 'error');
            return false;
          }
          if (!ticketInput || isNaN(ticket) || ticket < 1) {
            showToast('‚ùå Introduce un ticket medio v√°lido (m√≠nimo 1‚Ç¨)', 'error');
            return false;
          }
          return true;
          
        case 5:
          const numGroups = parseInt(document.getElementById('numAdGroups').value);
          if (numGroups > 6) {
            document.getElementById('numAdGroups').value = 6;
            showToast('‚ö†Ô∏è M√°ximo 6 grupos de anuncios ‚Äî Ajustado a 6', 'warning');
          }
          if (numGroups < 1) {
            showToast('‚ùå M√≠nimo 1 grupo de anuncios', 'error');
            return false;
          }
          return true;
          
        default:
          return true;
      }
    }
    
    // Collect data from step
    async function collectStepData(step) {
      switch(step) {
        case 1:
          formData.businessName = document.getElementById('businessName').value.trim();
          formData.industry = document.getElementById('industry').value;
          formData.products = document.getElementById('products').value.trim();
          formData.brands = document.getElementById('brands').value.trim();
          formData.targetAudience = document.getElementById('targetAudience').value.trim();
          
          // ENHANCED: Collect strengths separately
          formData.strengths = [];
          
          // Shipping
          const shippingCheck = document.getElementById('strength_shipping');
          const shippingAmount = document.getElementById('strength_shipping_amount');
          if (shippingCheck && shippingCheck.checked && shippingAmount.value) {
            formData.strengths.push(`Env√≠o gratis desde ${shippingAmount.value}‚Ç¨`);
          }
          
          // Experience
          const experienceCheck = document.getElementById('strength_experience');
          const experienceYears = document.getElementById('strength_experience_years');
          if (experienceCheck && experienceCheck.checked && experienceYears.value) {
            formData.strengths.push(`${experienceYears.value} a√±os de experiencia`);
          }
          
          // Returns
          const returnsCheck = document.getElementById('strength_returns');
          const returnsText = document.getElementById('strength_returns_text');
          if (returnsCheck && returnsCheck.checked && returnsText.value) {
            formData.strengths.push(returnsText.value);
          }
          
          // Support
          const supportCheck = document.getElementById('strength_support');
          const supportText = document.getElementById('strength_support_text');
          const supportPhone = document.getElementById('strength_support_phone');
          if (supportCheck && supportCheck.checked) {
            let supportStr = supportText.value || 'Atenci√≥n personalizada';
            if (supportPhone.value) {
              supportStr += ` - ${supportPhone.value}`;
            }
            formData.strengths.push(supportStr);
          }
          
          // Other strengths
          const otherStrengths = document.getElementById('strength_other').value.trim();
          if (otherStrengths) {
            otherStrengths.split('\n').forEach(s => {
              if (s.trim()) formData.strengths.push(s.trim());
            });
          }
          
          // ENHANCED: Analyze Multiple URLs if provided
          urlContent = await analyzeMultipleURLs();
          
          // Store first URL as landing URL for backward compatibility
          const urlInputs = document.querySelectorAll('.url-input');
          if (urlInputs.length > 0 && urlInputs[0].value.trim()) {
            formData.landingUrl = urlInputs[0].value.trim();
          }
          break;
          
        case 2:
          formData.campaignName = document.getElementById('campaignName').value.trim();
          formData.campaignType = document.getElementById('campaignType').value;
          formData.campaignGoal = document.getElementById('campaignGoal').value;
          break;
          
        case 3:
          // Obtener valores y aplicar l√≠mites de seguridad
          formData.targetCountry = document.getElementById('targetCountry').value.trim().substring(0, 25);
          formData.targetCities = document.getElementById('targetCities').value.trim().substring(0, 30);
          // Construir location para compatibilidad con el resto del c√≥digo
          formData.location = formData.targetCities 
            ? `${formData.targetCountry}, ${formData.targetCities}` 
            : formData.targetCountry;
          formData.language = document.getElementById('language').value;
          formData.baseKeywords = document.getElementById('baseKeywords').value.trim();
          formData.negativeKeywords = document.getElementById('negativeKeywords').value.trim();
          break;
          
        case 4:
          formData.dailyBudget = parseFloat(document.getElementById('dailyBudget').value.replace(',', '.'));
          formData.estimatedCPC = parseFloat(document.getElementById('estimatedCPC').value.replace(',', '.'));
          formData.bidStrategy = document.getElementById('bidStrategy').value;
          formData.conversionRate = parseFloat(document.getElementById('conversionRate').value.replace(',', '.'));
          formData.avgTicket = parseFloat(document.getElementById('avgTicket').value.replace(',', '.'));
          break;
          
        case 5:
          formData.numAdGroups = parseInt(document.getElementById('numAdGroups').value);
          formData.keywordsPerGroup = parseInt(document.getElementById('keywordsPerGroup').value);
          formData.adsPerGroup = parseInt(document.getElementById('adsPerGroup').value);
          break;
      }
    }
    
    // Generate campaign with Claude AI
    async function generateCampaign() {
      if (!validateStep(5)) return;
      
      await collectStepData(5);
      
      // Show loading
      document.getElementById('step5').style.display = 'none';
      document.getElementById('loadingState').classList.add('active');
      
      try {
        // Build enhanced prompt with URL content
        let enhancedPrompt = buildPrompt();
        
        // Call backend proxy ‚Äî API key gestionada en servidor Vercel, nunca en cliente
        const SERVER_URL = window.location.hostname === 'localhost'
          ? 'http://localhost:3000'
          : '';  // Vac√≠o = mismo dominio en producci√≥n (Vercel)
        const apiUrl = `${SERVER_URL}/api/campaigns/generate`;
        
        // Create fetch with timeout
        const controller = new AbortController();
        const timeoutId = setTimeout(() => controller.abort(), 600000); // 10 minutes timeout
        
        // Token JWT del login
        const authToken = localStorage.getItem('ads_engine_token') || localStorage.getItem('authToken') || localStorage.getItem('token') || '';
        
        const response = await fetch(apiUrl, {
          method: 'POST',
          signal: controller.signal,
          headers: {
            'content-type': 'application/json',
            'Authorization': `Bearer ${authToken}`
          },
          body: JSON.stringify({
            prompt: enhancedPrompt,
            formData: formData
          })
        });
        
        clearTimeout(timeoutId);
        
        if (!response.ok) {
          const errorData = await response.json();
          console.error('API Error:', errorData);
          throw new Error(errorData.error?.message || `Error ${response.status}: ${response.statusText}`);
        }
        
        const data = await response.json();
        console.log('API Response:', data);
        
        const campaignText = data.campaignText;
        
        // Parse campaign
        generatedCampaign = parseCampaignFromText(campaignText);
        
        // ‚úÖ AUTO-VALIDATOR V8 ‚Äî 100% Google Ads compliant before export
        generatedCampaign = autoValidateCampaign(generatedCampaign);
        
        // ‚úÖ ANTI-CANIBALIZACI√ìN + URLs POR GRUPO V8
        generatedCampaign = antiCanibalizacionYUrls(generatedCampaign);
        
        // Show results
        document.getElementById('loadingState').classList.remove('active');
        document.getElementById('resultsContainer').classList.add('active');
        
        displayResults();
        
        showToast('‚úÖ Campa√±a generada y validada ‚Äî Lista para Google Ads Editor');
        
      } catch (error) {
        console.error('Error generating campaign:', error);
        document.getElementById('loadingState').classList.remove('active');
        document.getElementById('step5').style.display = 'block';
        
        let errorMessage = 'Error al generar campa√±a: ';
        if (error.name === 'AbortError') {
          errorMessage += 'La solicitud tard√≥ demasiado (m√°s de 5 minutos). Intenta con menos grupos o keywords.';
        } else {
          errorMessage += error.message;
        }
        
        showToast('‚ùå ' + errorMessage, 'error');
        alert(errorMessage + '\n\nRevisa la consola (F12) para m√°s detalles.');
      }
    }
    
    // Build prompt for Claude (ENHANCED with URL content)
    function buildPrompt() {
      let prompt = `Eres un experto en Google Ads con 15+ a√±os de experiencia. Tu especialidad es crear campa√±as profesionales de alto rendimiento.

DATOS DEL NEGOCIO:
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
Negocio: ${formData.businessName}
Industria: ${formData.industry}
Productos/Servicios: ${formData.products}`;

      if (formData.brands) {
        prompt += `
Marcas que vende: ${formData.brands}`;
      }

      prompt += `
P√∫blico Objetivo: ${formData.targetAudience}
Ubicaci√≥n: ${formData.location}
Idioma: ${formData.language}`;

      // ENHANCED: Add strengths separately for ads only
      if (formData.strengths && formData.strengths.length > 0) {
        prompt += `

FORTALEZAS DEL NEGOCIO (SOLO para usar en ANUNCIOS, NO en keywords):
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
${formData.strengths.map(s => `‚Ä¢ ${s}`).join('\n')}

‚ö†Ô∏è IMPORTANTE: Estas fortalezas deben aparecer en los anuncios (titulares y descripciones), 
pero NO generes keywords basadas en ellas (ej: NO crear "30 a√±os experiencia" como keyword).`;
      }

      prompt += `

CONFIGURACI√ìN DE CAMPA√ëA:
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
Nombre: ${formData.campaignName}
Tipo: ${formData.campaignType}
Objetivo: ${formData.campaignGoal}
Presupuesto diario: ${formData.dailyBudget}‚Ç¨
CPC estimado: ${formData.estimatedCPC}‚Ç¨
Estrategia: ${formData.bidStrategy}

M√âTRICAS:
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
Tasa de conversi√≥n: ${formData.conversionRate}%
Ticket medio: ${formData.avgTicket}‚Ç¨
`;

      // NEW: Add URL content if available
      if (urlContent) {
        prompt += `

CONTENIDO ANALIZADO DE LAS URLS (hasta 7 p√°ginas):
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
${urlContent}

üéØ INSTRUCCIONES CR√çTICAS ‚Äî USO DEL CONTENIDO REAL:
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

1. EXTRACCI√ìN DE PRECIOS REALES (OBLIGATORIO):
   - Escanea el contenido y extrae TODOS los precios (‚Ç¨X, ‚Ç¨XX, ‚Ç¨XXX)
   - √ösalos DIRECTAMENTE en headlines: "Jersey Bordado ‚Ç¨44", "Bolsos Desde ‚Ç¨49"
   - M√≠nimo 30% de headlines deben contener precios reales de la p√°gina
   - √ösalos en descriptions: "Jerseys desde ‚Ç¨44, vaqueros ‚Ç¨49, camisas ‚Ç¨44"

2. EXTRACCI√ìN DE PRODUCTOS ESPEC√çFICOS (OBLIGATORIO):
   - Identifica nombres de productos concretos: "jersey bordado", "vaqueros panel lateral"
   - √ösalos textualmente en keywords y headlines ‚Äî son long-tail de alta intenci√≥n

3. ASIGNACI√ìN SEM√ÅNTICA DE URLs POR GRUPO (CR√çTICO):
   - OBLIGATORIO: Cada grupo de anuncios debe tener una finalUrl DIFERENTE
   - Analiza las URLs disponibles y asigna la m√°s relevante a cada grupo seg√∫n su tem√°tica
   - Ejemplo: grupo "Servicios" ‚Üí URL de /servicios/, grupo "Contacto" ‚Üí URL de /contacto/
   - Si no hay URL espec√≠fica para un grupo, usa la URL m√°s cercana sem√°nticamente
   - NUNCA pongas la homepage (/) para todos los grupos ‚Äî es el error m√°s grave
   - Si solo tienes 1 URL analizada, √∫sala para todos pero intenta a√±adir /servicios/ o /contacto/ seg√∫n el grupo

4. INTENCI√ìN SEM√ÅNTICA ‚Äî GOOGLE ADS 2024:
   - Google eval√∫a INTENCI√ìN del usuario, no solo keywords exactas
   - Estructura keywords por micro-momentos:
     * "Quiero comprar" ‚Üí EXACT, CPC alto: [comprar jersey mujer barcelona]
     * "Quiero hacer" ‚Üí PHRASE, CPC medio: "comprar ropa mujer online"
     * "Quiero ir" ‚Üí PHRASE con ciudad: "tienda moda femenina barcelona"
     * "Quiero saber" ‚Üí BROAD, CPC bajo: moda mujer tendencia 2025

5. COHERENCIA TOTAL ANUNCIO-LANDING:
   - Usa los MISMOS t√©rminos, lenguaje y tono de la p√°gina
   - NO prometas lo que NO est√° en la landing
   - Los datos/n√∫meros del anuncio deben existir en la p√°gina
`;
      }

      if (formData.baseKeywords) {
        prompt += `\nKeywords base sugeridas: ${formData.baseKeywords}`;
      }
      
      if (formData.negativeKeywords) {
        prompt += `\nKeywords negativas sugeridas: ${formData.negativeKeywords}`;
      }

      prompt += `

GENERA UNA CAMPA√ëA COMPLETA CON:

üåê ASIGNACI√ìN DE URLs POR GRUPO (OBLIGATORIO SIEMPRE):
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
- CADA grupo de anuncios DEBE tener una finalUrl diferente y espec√≠fica
- Asigna la URL m√°s relevante para la tem√°tica de cada grupo
- Construye URLs espec√≠ficas a√±adiendo /ruta/ a la URL base: /servicios/, /contacto/, /sobre-nosotros/, /productos/, /precios/, etc.
- NUNCA repitas la misma URL en todos los grupos
- NUNCA pongas solo "/" o la homepage para todos los grupos
- Ejemplo correcto:
  Grupo "Servicios" ‚Üí finalUrl: "${formData.landingUrl || 'https://ejemplo.com'}/servicios/"
  Grupo "Contacto" ‚Üí finalUrl: "${formData.landingUrl || 'https://ejemplo.com'}/contacto/"
  Grupo "Sobre Nosotros" ‚Üí finalUrl: "${formData.landingUrl || 'https://ejemplo.com'}/quienes-somos/"
${urlContent ? '- Usa las URLs REALES analizadas del sitio para m√°xima precisi√≥n' : '- Construye URLs l√≥gicas basadas en la estructura t√≠pica del sector'}

1. ESTRUCTURA DE ${formData.numAdGroups} GRUPOS DE ANUNCIOS
   - Cada grupo debe tener un tema espec√≠fico y coherente
   - Nombres descriptivos tipo: "GrupoNombre_TemaEspecifico"
   - Distribuye los temas de forma estrat√©gica seg√∫n el embudo:
     * Grupo 1: Awareness/Investigaci√≥n (t√©rminos generales, educativos)
     * Grupo 2: Consideraci√≥n (comparaciones, caracter√≠sticas espec√≠ficas)
     * Grupo 3: Decisi√≥n (marca, urgencia, ofertas)
     * Grupo 4: Casos espec√≠ficos o nicho (si aplica al negocio)

2. KEYWORDS (${formData.keywordsPerGroup} por grupo)

   üéØ INTENCI√ìN SEM√ÅNTICA ‚Äî MICRO-MOMENTOS GOOGLE ADS 2024:
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   Cada grupo debe cubrir los 4 micro-momentos de intenci√≥n:
   ‚Ä¢ "Quiero comprar" ‚Üí EXACT + CPC alto (m√°xima transacci√≥n)
   ‚Ä¢ "Quiero hacer"   ‚Üí PHRASE + CPC medio (acci√≥n espec√≠fica)
   ‚Ä¢ "Quiero ir"      ‚Üí PHRASE ciudad + CPC medio (intenci√≥n local)
   ‚Ä¢ "Quiero saber"   ‚Üí BROAD + CPC bajo (investigaci√≥n)`;

      if (urlContent) {
        prompt += `
   - PRIORIDAD M√ÅXIMA: Extrae keywords del contenido REAL de la landing
   - Usa nombres de productos espec√≠ficos como exact match
   - Long-tail con precios reales si los hay: "jersey bordado ‚Ç¨44 barcelona"`;
      }

      prompt += `
   - Mezcla: 40% exacta [kw], 40% frase "kw", 20% amplia kw
   - Formato: {"keyword": "texto", "matchType": "EXACT|PHRASE|BROAD", "maxCPC": X.XX}
   - CPCs: transaccional exact > phrase > broad informativa
   - NO uses fortalezas del negocio como keywords

3. ANUNCIOS RESPONSIVE (${formData.adsPerGroup} por grupo)
   
   ‚ö†Ô∏è CR√çTICO - REGLAS DE DIFERENCIACI√ìN:
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   
   CADA ANUNCIO DEBE SER √öNICO Y DIFERENTE:
   
   ‚Ä¢ Los ${formData.adsPerGroup} anuncios de CADA grupo deben tener enfoques DISTINTOS
   ‚Ä¢ M√°ximo 3-4 titulares pueden repetirse entre todos los anuncios
   ‚Ä¢ Las descripciones deben ser completamente √∫nicas por anuncio
   ‚Ä¢ NO generes anuncios que sean "rotaciones" de los mismos titulares
   
   ENFOQUE POR ANUNCIO (para cada grupo):
   
   üìå ANUNCIO 1 - "Beneficios y Resultados"
      Titulares: Enfocados en beneficios concretos, resultados, n√∫meros, casos de √©xito
      Ejemplos: "500 Casos Ganados", "Ahorra 40% Tiempo", "ROI 300% Garantizado"
      Descripciones: Resultados espec√≠ficos, estad√≠sticas, logros medibles
   
   üìå ANUNCIO 2 - "Urgencia y Acci√≥n"
      Titulares: Urgencia, CTAs directos, llamadas a la acci√≥n inmediata
      Ejemplos: "Compra X Ya Disponible", "Accede 24/7 Ahora", "Respuesta en 1 Hora"
      Descripciones: Disponibilidad, rapidez, facilidad, acci√≥n inmediata
   
   üìå ANUNCIO 3 - "Autoridad y Credibilidad"
      Titulares: Experiencia, certificaciones, premios, reconocimientos, marca
      Ejemplos: "20 A√±os Experiencia", "Certificado ISO", "L√≠deres en [sector]"
      Descripciones: Trayectoria, credenciales, equipo experto, garant√≠as
   
   üìå ANUNCIO 4 - "Soluci√≥n al Problema" (si aplica)
      Titulares: Problemas del cliente, soluciones espec√≠ficas, empat√≠a
      Ejemplos: "¬øProblema con X?", "Elimina [dolor]", "Sin [obst√°culo]"
      Descripciones: Comprensi√≥n del problema, soluci√≥n clara, proceso simple`;

      if (urlContent) {
        prompt += `
   
   üéØ COHERENCIA CON LANDING PAGE:
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   
   - Los titulares y descripciones DEBEN reflejar el contenido real de la landing
   - Usa los MISMOS t√©rminos, lenguaje y tono que aparecen en la p√°gina
   - Menciona beneficios y caracter√≠sticas ESPEC√çFICAS encontradas en el contenido
   - Si la landing menciona n√∫meros/datos concretos, √∫salos en los anuncios
   - Si hay testimonios o casos de √©xito en la landing, refer√©ncialos
   - Asegura que el mensaje del anuncio coincida con lo que encontrar√° el usuario`;
      }

      prompt += `
   
   üí° T√âCNICAS DE COPYWRITING PROFESIONAL:
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   
   TITULARES POTENTES ‚Äî SOLO ACCIONES, NUNCA PREGUNTAS:
   ‚Ä¢ Usa CTAs activos: "Compra", "Descubre", "Explora", "Solicita", "Consigue"
   ‚Ä¢ Usa n√∫meros: "15 A√±os", "500+ Clientes", "En 24 Horas", "Desde 1995"
   ‚Ä¢ Urgencia: "Hoy", "Ya", "Ahora", "Inmediato", "24/7", "Urgente"
   ‚Ä¢ Beneficios claros: "Ahorra Tiempo", "Aumenta Ventas", "Reduce Costes"
   ‚Ä¢ Exclusividad: "√önico", "Exclusivo", "Premium", "Elite", "Experto"
   ‚Ä¢ Localizaci√≥n: Incluye ciudad/zona si es relevante
   ‚Ä¢ Emociones: "Tranquilidad", "Confianza", "√âxito Garantizado"
   
   ‚ùå PROHIBIDO EN HEADLINES:
   
   üö®üö®üö® NUNCA USAR PREGUNTAS - ESTO ES CR√çTICO üö®üö®üö®
   ‚Ä¢ Preguntas COMPLETAMENTE PROHIBIDAS: "¬øBuscas?", "¬øNecesitas?", "¬øSin?", "¬øProblema?"
   ‚Ä¢ Pasivo: "Disponible para Ti", "Servicio de Calidad"
   
   ‚ö†Ô∏è CUALQUIER headline con "¬ø" es ERROR GRAVE - CTR -5-8%
   ‚úÖ USA SIEMPRE: "Descubre", "Consigue", "Compra", "Solicita", "Explora"
   ‚ùå NUNCA USES: "¬øSin?", "¬øProblema?", "¬øQuieres?", "¬øNecesitas?"
   ‚Ä¢ Vago: "Nueva Colecci√≥n Disponible", "Productos para Ti"
   
   ‚ö†Ô∏è LONGITUD OPTIMIZADA DE TITULARES (CR√çTICO):
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   
   üö® L√çMITES ABSOLUTOS - NO NEGOCIABLES:
   ‚Ä¢ M√°ximo ABSOLUTO: 30 caracteres (incluye espacios y puntuaci√≥n)
   ‚Ä¢ M√≠nimo OBLIGATORIO: 20 caracteres
   ‚Ä¢ Rango √ìPTIMO: 25-30 caracteres
   
   ‚ùå‚ùå‚ùå CUALQUIER TITULAR >30 CARACTERES SER√Å RECHAZADO POR GOOGLE ‚ùå‚ùå‚ùå
   ‚ùå‚ùå‚ùå SI UN TITULAR EXCEDE 30 CHARS, REC√ìRTALO INMEDIATAMENTE ‚ùå‚ùå‚ùå
   
   PROCESO OBLIGATORIO PARA CADA TITULAR:
   1. Escribe el titular
   2. CUENTA los caracteres (usa len() mental)
   3. Si >30 ‚Üí ELIMINA palabras hasta llegar a ‚â§30
   4. Si <20 ‚Üí A√ëADE contenido hasta llegar a ‚â•20
   5. VERIFICA NUEVAMENTE antes de finalizar
   
   ‚ùå NUNCA generes titulares de menos de 20 caracteres
   ‚ùå NUNCA excedas los 30 caracteres - ES IMPOSIBLE PASARSE
   ‚úÖ SIEMPRE aprovecha el espacio disponible (25-30 es ideal)
   
   EJEMPLOS DE TITULARES MAL OPTIMIZADOS (muy cortos):
   
   ‚ùå "Te Ayudamos" (11 chars) ‚Üí DESPERDICIO de 19 chars
   ‚ùå "Contacto Directo" (16 chars) ‚Üí DESPERDICIO de 14 chars
   ‚ùå "Acci√≥n Ya" (9 chars) ‚Üí DESPERDICIO de 21 chars
   ‚ùå "Resultados" (10 chars) ‚Üí DESPERDICIO de 20 chars
   ‚ùå "Llama Ahora" (11 chars) ‚Üí DESPERDICIO de 19 chars
   
   EJEMPLOS DE TITULARES BIEN OPTIMIZADOS (25-30 chars):
   
   ‚úÖ "Te Ayudamos 24/7 en Barcelona" (29 chars) ‚Üí √ìPTIMO
   ‚úÖ "Contacto Directo Sin Esperas" (28 chars) ‚Üí √ìPTIMO
   ‚úÖ "Acci√≥n Inmediata Hoy Mismo" (26 chars) ‚Üí √ìPTIMO
   ‚úÖ "Resultados Probados 500 Casos" (29 chars) ‚Üí √ìPTIMO
   ‚úÖ "Llama Ahora 93 414 02 93" (24 chars) ‚Üí BUENO
   
   6 T√âCNICAS PARA OPTIMIZAR LONGITUD:
   
   1Ô∏è‚É£ A√ëADIR UBICACI√ìN (si es local):
      ‚Ä¢ "Experto" (7c) ‚Üí "Experto Barcelona 20 A√±os" (26c)
      ‚Ä¢ "Abogado" (7c) ‚Üí "Abogado Penalista Barcelona" (28c)
      ‚Ä¢ "Cl√≠nica" (7c) ‚Üí "Cl√≠nica Dental Madrid Centro" (29c)
   
   2Ô∏è‚É£ A√ëADIR URGENCIA TEMPORAL:
      ‚Ä¢ "Contacta" (8c) ‚Üí "Contacta Ahora Mismo 24/7" (26c)
      ‚Ä¢ "Defensa" (7c) ‚Üí "Defensa Inmediata Hoy Mismo" (28c)
      ‚Ä¢ "Respuesta" (9c) ‚Üí "Respuesta R√°pida Hoy 24/7" (26c)
   
   3Ô∏è‚É£ A√ëADIR N√öMEROS/DATOS:
      ‚Ä¢ "Casos Ganados" (13c) ‚Üí "500 Casos Ganados Barcelona" (28c)
      ‚Ä¢ "Experiencia" (11c) ‚Üí "20 A√±os Experiencia Probada" (28c)
      ‚Ä¢ "Clientes" (8c) ‚Üí "1000+ Clientes Satisfechos" (27c)
   
   4Ô∏è‚É£ A√ëADIR BENEFICIO EXTRA:
      ‚Ä¢ "Consulta" (8c) ‚Üí "Consulta Gratis Sin Compromiso" (30c)
      ‚Ä¢ "Env√≠o" (5c) ‚Üí "Env√≠o Gratis en 24 Horas" (25c)
      ‚Ä¢ "Prueba" (6c) ‚Üí "Prueba Gratis 30 D√≠as Sin Riesgo" (‚Üí33c ‚ùå MUY LARGO)
      ‚Ä¢ "Prueba" (6c) ‚Üí "Prueba Gratis 30 D√≠as" (21c) ‚úÖ
   
   5Ô∏è‚É£ COMBINAR CONCEPTOS:
      ‚Ä¢ "Experto" (7c) ‚Üí "Experto Certificado Barcelona" (29c)
      ‚Ä¢ "R√°pido" (6c) ‚Üí "R√°pido Eficaz Garantizado" (26c)
      ‚Ä¢ "Premium" (7c) ‚Üí "Premium Calidad Precio Justo" (28c)
   
   6Ô∏è‚É£ A√ëADIR LLAMADA A LA ACCI√ìN:
      ‚Ä¢ "Disponible" (10c) ‚Üí "Disponible Ya Llama Ahora" (26c)
      ‚Ä¢ "Asesor√≠a" (8c) ‚Üí "Asesor√≠a Experta Solicita Ya" (29c)
      ‚Ä¢ "Servicio" (8c) ‚Üí "Servicio Profesional Contacta" (30c)
   
   EJEMPLOS POR LONGITUD OBJETIVO:
   
   üìè 20-22 caracteres (M√çNIMO ACEPTABLE):
   ‚Ä¢ "Experto Barcelona Top" (21c)
   ‚Ä¢ "Consulta Gratis Hoy" (20c)
   ‚Ä¢ "Llamada Ya Sin Espera" (22c)
   
   üìè 25-27 caracteres (BUENO):
   ‚Ä¢ "Abogado Penalista BCN 24/7" (26c)
   ‚Ä¢ "500 Casos √âxito Barcelona" (26c)
   ‚Ä¢ "Cl√≠nica Dental Barcelona Top" (28c ‚Üí AJUSTAR)
   ‚Ä¢ "Cl√≠nica Dental Top Barcelona" (27c ‚Üí MEJOR)
   
   üìè 28-30 caracteres (√ìPTIMO):
   ‚Ä¢ "Especialista Barcelona 20 A√±os" (30c)
   ‚Ä¢ "Defensa Penal Inmediata 24/7" (28c)
   ‚Ä¢ "Env√≠o Gratis Hoy Toda Espa√±a" (29c)
   
   EJEMPLOS POR INDUSTRIA:
   
   üèõÔ∏è LEGAL (Abogados):
   ‚ùå "Marco Esteban" (13c) 
   ‚úÖ "Marco Esteban Penalista BCN" (28c)
   
   ‚ùå "Defensa Penal" (13c)
   ‚úÖ "Defensa Penal Experta 24/7" (27c)
   
   üè• SALUD (Cl√≠nicas):
   ‚ùå "Sin Dolor" (8c)
   ‚úÖ "Tratamiento Sin Dolor Garantizado" (‚Üí34c ‚ùå MUY LARGO)
   ‚úÖ "Sin Dolor T√©cnica Avanzada" (26c) ‚Üê MEJOR
   
   üõí E-COMMERCE:
   ‚ùå "Env√≠o Gratis" (11c)
   ‚úÖ "Env√≠o Gratis en 24h Espa√±a" (27c)
   
   üíª SAAS:
   ‚ùå "Prueba Gratis" (12c)
   ‚úÖ "Prueba Gratis 30 D√≠as Ya" (24c)
   
   PROCESO DE OPTIMIZACI√ìN:
   
   Para cada titular que generes:
   
   PASO 1: Escribe el titular base
   PASO 2: Cuenta los caracteres
   PASO 3: Si <20 chars ‚Üí A√ëADE contenido (ubicaci√≥n/urgencia/dato/beneficio)
   PASO 4: Si >30 chars ‚Üí REDUCE (quita palabras innecesarias)
   PASO 5: Verifica que est√© entre 20-30 chars
   PASO 6: Optimiza para estar cerca de 30 chars si es posible
   
   EJEMPLOS DE PROCESO:
   
   Titular base: "Experto" (7c)
   ‚Üí +ubicaci√≥n: "Experto Barcelona" (17c) ‚Üí A√öN CORTO
   ‚Üí +experiencia: "Experto Barcelona 20 A√±os" (26c) ‚Üí ‚úÖ PERFECTO
   
   Titular base: "Abogado Penalista Especializado Barcelona" (41c)
   ‚Üí DEMASIADO LARGO (>30c)
   ‚Üí Reducir: "Abogado Penalista Barcelona" (28c) ‚Üí ‚úÖ PERFECTO
   
   ‚úÖ REGLA FINAL:
   
   Antes de finalizar cada anuncio, verifica:
   ‚ñ° ¬øTodos los titulares tienen 20-30 caracteres?
   ‚ñ° ¬øNing√∫n titular tiene <20 caracteres?
   ‚ñ° ¬øNing√∫n titular excede 30 caracteres?
   ‚ñ° ¬øLa mayor√≠a est√°n en el rango 25-30 (√≥ptimo)?
   
   Si alg√∫n titular tiene <20 chars ‚Üí ALARGARLO OBLIGATORIAMENTE
   Si alg√∫n titular tiene >30 chars ‚Üí ACORTARLO OBLIGATORIAMENTE
   
   DESCRIPCIONES EFECTIVAS:
   ‚Ä¢ Empieza con el beneficio principal en los primeros 40 caracteres
   ‚Ä¢ Incluye llamada a la acci√≥n clara: "Solicita", "Contacta", "Descubre", "Empieza"
   ‚Ä¢ Usa verbos de acci√≥n: "Consigue", "Logra", "Obt√©n", "Mejora"
   ‚Ä¢ Menciona garant√≠as si existen: "Sin compromiso", "Prueba gratis", "Garantizado"
   ‚Ä¢ Incluye diferenciadores: "Sin competencia", "M√©todo √∫nico", "Tecnolog√≠a propia"
   ‚Ä¢ Crea FOMO: "Plazas limitadas", "Oferta temporal", "Solo hoy"
   
   ESTRUCTURA POR ANUNCIO:
   ‚Ä¢ 15 titulares distribuidos:
     - 5 titulares con beneficios/resultados
     - 3 titulares con marca/autoridad  
     - 3 titulares con urgencia/acci√≥n
     - 2 titulares con caracter√≠sticas √∫nicas
     - 2 titulares con localizaci√≥n/disponibilidad
   
   ‚Ä¢ 4 descripciones:
     - Desc 1: Beneficio principal + CTA
     - Desc 2: Caracter√≠sticas clave + credibilidad
     - Desc 3: Diferenciador + garant√≠a/prueba social
     - Desc 4: Urgencia + facilidad de acci√≥n
   
   üõ§Ô∏è PATHS DIN√ÅMICOS - ESTRATEGIA INTELIGENTE (max 15 chars c/u):
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   
   ‚ö° NUEVA L√ìGICA: Paths deben reflejar las KEYWORDS del grupo, NO ser gen√©ricos
   
   OBJETIVO: M√°xima relevancia = Mejor Quality Score = Menor CPC
   
   PROCESO DE GENERACI√ìN DE PATHS:
   
   PASO 1: Analiza las keywords principales del grupo
   PASO 2: Identifica los 2 t√©rminos m√°s importantes/frecuentes
   PASO 3: √ösalos como Path1 y Path2 (m√°x 15 chars cada uno)
   
   EJEMPLOS POR TIPO DE NEGOCIO:
   
   üì¶ E-COMMERCE / RETAIL:
   Grupo: "Zapatillas_Running"
   Keywords: [zapatillas running], [zapatos deportivos running]
   ‚úÖ Path1: "Zapatillas" (10c) | Path2: "Running" (7c)
   ‚ùå Path1: "Deportes" (8c) | Path2: "Barcelona" (9c) ‚Üê Gen√©rico
   
   Grupo: "Smartphones_5G"  
   Keywords: [smartphones 5g], [m√≥viles 5g], [tel√©fonos 5g]
   ‚úÖ Path1: "Smartphones" (11c) | Path2: "5G" (2c)
   ‚ùå Path1: "Tecnologia" (10c) | Path2: "Tienda" (6c) ‚Üê Vago
   
   üëî SERVICIOS PROFESIONALES:
   Grupo: "Abogado_Penalista"
   Keywords: [abogado penalista], [defensa penal], [abogado criminal]
   ‚úÖ Path1: "Penalista" (10c) | Path2: "Barcelona" (9c)
   ‚ùå Path1: "Servicios" (9c) | Path2: "Legales" (7c) ‚Üê Inespec√≠fico
   
   Grupo: "Consultor_SEO"
   Keywords: [consultor seo], [servicios seo], [agencia seo]
   ‚úÖ Path1: "Consultor" (9c) | Path2: "SEO" (3c)
   ‚ùå Path1: "Marketing" (9c) | Path2: "Digital" (7c) ‚Üê Demasiado amplio
   
   üè• SERVICIOS LOCALES:
   Grupo: "Clinica_Dental"
   Keywords: [cl√≠nica dental], [dentista], [odontolog√≠a]
   ‚úÖ Path1: "Dental" (6c) | Path2: "Centro-BCN" (10c)
   ‚ùå Path1: "Salud" (5c) | Path2: "Cuidado" (7c) ‚Üê Vago
   
   üíª SAAS / SOFTWARE:
   Grupo: "CRM_Ventas"
   Keywords: [crm ventas], [software ventas], [gesti√≥n clientes]
   ‚úÖ Path1: "CRM" (3c) | Path2: "Ventas" (6c)
   ‚ùå Path1: "Software" (8c) | Path2: "Empresas" (8c) ‚Üê Gen√©rico
   
   üéØ REGLAS OBLIGATORIAS:
   
   1. M√°ximo 15 caracteres por path (incluye espacios y guiones)
   2. Evita art√≠culos: NO "El", "La", "Los", "Las"
   3. Evita preposiciones innecesarias: NO "de", "en", "para"
   4. Usa guiones para palabras compuestas: "Marketing-Digital" (16c ‚ùå) ‚Üí "Mkt-Digital" (11c ‚úÖ)
   5. NO puntuaci√≥n final (sin puntos, comas, etc.)
   6. Extrae t√©rminos de las KEYWORDS del grupo
   7. Prioriza especificidad sobre genericidad
   
   ‚ùå ERRORES COMUNES A EVITAR:
   
   ‚Ä¢ "Servicios Profesionales" (23c) ‚Üê MUY LARGO + vago
   ‚Ä¢ "Productos" + "Calidad" ‚Üê Vac√≠o, no dice nada espec√≠fico
   ‚Ä¢ "Barcelona" + "Espa√±a" ‚Üê Ubicaci√≥n en ambos paths (desperdicio)
   ‚Ä¢ "Consultor√≠a" + "Servicios" ‚Üê Redundante y gen√©rico
   ‚Ä¢ Usar mismo path en todos los grupos ‚Üê GRAVE ERROR
   
   ‚úÖ PATRONES GANADORES:
   
   PRODUCTO + CARACTER√çSTICA:
   ‚Ä¢ "Zapatillas" + "Running"
   ‚Ä¢ "TV" + "4K-Smart"
   ‚Ä¢ "Laptop" + "Gaming"
   
   SERVICIO + UBICACI√ìN:
   ‚Ä¢ "Abogado" + "Barcelona"
   ‚Ä¢ "Dentista" + "Centro-BCN"
   ‚Ä¢ "Fontanero" + "24h-Urgente"
   
   ESPECIALIDAD + BENEFICIO:
   ‚Ä¢ "SEO" + "Posicion-1"
   ‚Ä¢ "Marketing" + "ROI-Alto"
   ‚Ä¢ "Dise√±o" + "Profesional"
   
   CATEGOR√çA + SUBCATEGOR√çA:
   ‚Ä¢ "Perfumes" + "Mujer"
   ‚Ä¢ "Ropa" + "Verano-2024"
   ‚Ä¢ "Muebles" + "Salon"
   
   IMPACTO ESTIMADO:
   ‚Ä¢ Paths gen√©ricos ‚Üí CTR base
   ‚Ä¢ Paths espec√≠ficos ‚Üí +8-12% CTR
   ‚Ä¢ Paths con keywords ‚Üí +0.5-1 punto Quality Score
   
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   
   L√çMITES ESTRICTOS (Google Ads):
   ‚Ä¢ Titulares: M√°ximo 30 caracteres (incluye espacios)
   ‚Ä¢ Descripciones: M√°ximo 90 caracteres (incluye espacios)
   ‚Ä¢ Paths: M√°ximo 15 caracteres cada uno
   
   üö®üö®üö® ATENCI√ìN CR√çTICA - LONGITUDES DESCRIPTIONS üö®üö®üö®
   
   L√çMITE ABSOLUTO DESCRIPTIONS: 90 CARACTERES
   
   ‚ùå Cualquier description >90 caracteres ser√° RECHAZADA por Google
   ‚ùå NO hay excepciones - 90 es el M√ÅXIMO ABSOLUTO
   ‚ùå Si una description llega a 91+ caracteres, GOOGLE LA RECHAZA
   
   üö® NUEVO: M√çNIMO RECOMENDADO 80 CARACTERES
   ‚úÖ RANGO √ìPTIMO: 80-90 caracteres (mejor 85-90)
   ‚ö†Ô∏è Evita descriptions <80c ‚Üí desaprovechas espacio = menos info = peor CTR
   
   PROCESO OBLIGATORIO PARA CADA DESCRIPTION:
   1. Escribe la description
   2. CUENTA caracteres mentalmente (m√≠n 80, m√°x 90)
   3. Si <80 ‚Üí A√ëADE beneficios/detalles hasta llegar a 80-90
   4. Si >90 ‚Üí ELIMINA palabras/frases hasta ‚â§90
   5. Si >85 ‚Üí REVISA para asegurar que no pases de 90
   6. VERIFICA NUEVAMENTE los 4 descriptions antes de finalizar
   
   EJEMPLOS CORRECTOS (80-90 caracteres):
   ‚úÖ "20 a√±os defendiendo casos complejos con √©xito en Barcelona. Equipo especializado" (82c)
   ‚úÖ "Equipo multidisciplinar te acompa√±a en todo el proceso legal. Atenci√≥n personalizada" (86c)
   ‚úÖ "Ropa femenina desde ‚Ç¨32. Vestidos, camisas, jerseys. Env√≠o gratis desde ‚Ç¨49. BCN" (80c)
   
   EJEMPLOS INCORRECTOS (<80 caracteres):
   ‚ùå "Liquidaci√≥n stock. Tienda Barcelona. Confianza 15 a√±os" (56c) ‚Üí MUY CORTO
   ‚ùå "Ahorra sin renunciar estilo. Jerseys ‚Ç¨24. BCN" (47c) ‚Üí MUY CORTO
   
   ‚ö†Ô∏è IMPORTANTE: Aprovecha el espacio 80-90c para maximizar informaci√≥n y CTR
   
   üìä PERSONALIZACI√ìN POR INDUSTRIA:
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê`;
   
      // Add industry-specific guidance
      const industryGuidance = {
        'legal': `
   SECTOR LEGAL/ABOGADOS:
   ‚Ä¢ Usa confianza y credibilidad: "Experto", "Especialista", "Casos Ganados"
   ‚Ä¢ Urgencia apropiada: "Consulta Hoy", "Defensa Inmediata", "24/7"
   ‚Ä¢ Evita promesas absolutas: mejor "Alta tasa √©xito" que "Ganar√°s seguro"
   ‚Ä¢ Menciona especialidades: tipos de casos, jurisdicciones
   ‚Ä¢ Incluye credenciales: a√±os experiencia, casos resueltos`,
        
        'health': `
   SECTOR SALUD/CL√çNICAS:
   ‚Ä¢ Prioriza confianza y profesionalidad: "Certificado", "Equipo M√©dico", "Tecnolog√≠a"
   ‚Ä¢ Enfatiza cuidado: "Atenci√≥n Personalizada", "Sin Dolor", "Resultados Naturales"
   ‚Ä¢ Localizaci√≥n importante: pacientes buscan cercan√≠a
   ‚Ä¢ Menciona especialidades m√©dicas espec√≠ficas
   ‚Ä¢ Incluye facilidades: "Primera Consulta Gratis", "Financiaci√≥n"`,
        
        'ecommerce': `
   SECTOR E-COMMERCE / MODA / RETAIL:
   ‚Ä¢ Precios concretos SIEMPRE: "Desde ‚Ç¨16", "Vestidos ‚Ç¨25", "Hasta 50% dto"
   ‚Ä¢ Urgencia comercial real: "Stock Limitado", "Solo Esta Semana", "√öltimas Unidades"
   ‚Ä¢ Facilidades de compra: "Env√≠o Gratis +60‚Ç¨", "Cambio Tallas Gratis", "Devoluci√≥n 30 D√≠as"
   ‚Ä¢ Variedad: "500+ Prendas", "Nueva Colecci√≥n", "Todas las Tallas"
   ‚Ä¢ Trust local: "15 A√±os Moda BCN", "Familia Fundadora", "Tienda F√≠sica BCN"
   ‚Ä¢ CTAs espec√≠ficos: "Compra", "Descubre", "Explora" ‚Äî NUNCA preguntas
   
   üõçÔ∏è PARA MODA FEMENINA ESPEC√çFICAMENTE:
   ‚Ä¢ Grupos de ropa: "tendencia", "temporada", "moda actual", "estilo"
   ‚Ä¢ Grupos de rebajas: "liquidaci√≥n", "stock limitado", "aut√©ntico", "precio reducido"
   ‚Ä¢ Grupos de fiesta: "elegante", "lentejuelas", "terciopelo", "ocasiones especiales"
   ‚Ä¢ Grupos de zapatos: "confort", "todas tallas", "estilo propio", "calzado premium"
   ‚Ä¢ Grupos de accesorios: "completa tu look", "precio accesible", "bolsos", "bisuter√≠a"
   ‚Ä¢ Grupos de joyer√≠a/bisuter√≠a: "exclusivo", "dise√±o √∫nico", "premium", "detalles"
   ‚Ä¢ Total look: "outfit completo", "combina f√°cil", "asesoramiento personal"`,
        
        'saas': `
   SECTOR SAAS/SOFTWARE:
   ‚Ä¢ Eficiencia: "Automatiza", "Ahorra Tiempo", "M√°s Productivo"
   ‚Ä¢ Facilidad: "F√°cil de Usar", "Sin Instalaci√≥n", "Cloud"
   ‚Ä¢ Prueba: "Prueba Gratis", "Demo Gratuita", "Sin Tarjeta"
   ‚Ä¢ Escalabilidad: "Crece Contigo", "Flexible", "Personalizable"
   ‚Ä¢ ROI: "Reduce Costes", "Aumenta Ventas", "ROI Medible"`,
        
        'consulting': `
   SECTOR CONSULTOR√çA / SERVICIOS PROFESIONALES:
   ‚Ä¢ Experiencia cuantificada: "15+ A√±os", "200+ Proyectos", "50+ Clientes"
   ‚Ä¢ Resultados medibles: "ROI +300%", "Reduce Costes 40%", "Ventas +25%"
   ‚Ä¢ Metodolog√≠a diferenciada: "M√©todo Probado", "Sistema √önico", "Proceso Claro"
   ‚Ä¢ Personalizaci√≥n: "A Medida", "Tu Situaci√≥n", "Diagn√≥stico Personalizado"
   ‚Ä¢ Garant√≠as: "Sin Riesgo", "Resultados o Devolvemos", "Garant√≠a Satisfacci√≥n"
   ‚Ä¢ CTAs directos: "Solicita", "Reserva", "Agenda", "Consulta" ‚Äî NUNCA preguntas
   ‚Ä¢ Trust: certificaciones, partnerships, casos de √©xito con datos reales
   
   üíº DIFERENCIACI√ìN POR TIPO DE SERVICIO:
   ‚Ä¢ Awareness ‚Üí educativo, problema del cliente, sin urgencia
   ‚Ä¢ Consideraci√≥n ‚Üí comparativo, metodolog√≠a, diferenciadores
   ‚Ä¢ Decisi√≥n ‚Üí urgencia real, CTA fuerte, garant√≠as concretas
   ‚Ä¢ Nicho/Especializaci√≥n ‚Üí expertise espec√≠fico, casos, resultados`,
        
        'education': `
   SECTOR EDUCACI√ìN/FORMACI√ìN:
   ‚Ä¢ Resultados: "Aprende en X", "Domina", "Certif√≠cate"
   ‚Ä¢ Credenciales: "Profesores Expertos", "Certificado Oficial", "Acreditado"
   ‚Ä¢ Flexibilidad: "A tu Ritmo", "Online", "Clases Personalizadas"
   ‚Ä¢ Empleabilidad: "Consigue Trabajo", "Alta Demanda", "Salidas"
   ‚Ä¢ Accesibilidad: "Desde Casa", "F√°cil Acceso", "Empieza Ya"`
      };
      
      const industryKey = formData.industry?.toLowerCase() || '';
      for (const [key, guidance] of Object.entries(industryGuidance)) {
        if (industryKey.includes(key) || industryKey.includes(key.substring(0, 4))) {
          prompt += guidance;
          break;
        }
      }
      
      prompt += `
   
   ‚úÖ CHECKLIST FINAL POR ANUNCIO:
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   
   Antes de generar cada anuncio, verifica:
   
   ‚ñ° ¬øLos 15 titulares son √öNICOS y no repetitivos?
   ‚ñ° ¬øHay variedad de enfoques (beneficios, urgencia, autoridad, problema)?
   ‚ñ° ¬øLos titulares usan n√∫meros, preguntas, o emociones?
   ‚ñ° ¬øLas 4 descripciones son completamente diferentes entre s√≠?
   ‚ñ° ¬øCada descripci√≥n tiene CTA claro y beneficio espec√≠fico?
   ‚ñ° ¬øSe respetan los l√≠mites de caracteres (30 y 90)?
   ‚ñ° ¬øEl anuncio refleja el contenido de la landing page?
   ‚ñ° ¬øSe diferencia claramente de los otros anuncios del mismo grupo?

4. KEYWORDS NEGATIVAS (25-30 t√©rminos con DOBLE PROTECCI√ìN)
   
   ‚ö†Ô∏è CR√çTICO: Sistema de Doble Capa para M√°xima Protecci√≥n
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   
   GENERAR 2 TIPOS DE NEGATIVAS:
   
   üéØ CAPA 1 - EXACT MATCH (25-30 keywords):
   Bloquea solo la palabra exacta
   
   üõ°Ô∏è CAPA 2 - PHRASE MATCH (Las 15 m√°s cr√≠ticas):
   Bloquea la palabra + cualquier variaci√≥n
   
   POR QU√â ESTO ES CR√çTICO:
   ‚Ä¢ Exact "gratis" NO bloquea ‚Üí "zapatos gratis", "env√≠o gratis"
   ‚Ä¢ Phrase "gratis" S√ç bloquea ‚Üí "zapatos gratis", "env√≠o gratis", "productos gratis"
   ‚Ä¢ Doble protecci√≥n sin afectar tr√°fico v√°lido
   
   CATEGOR√çAS DE NEGATIVAS A INCLUIR:
   
   üìå B√∫squedas de contenido gratuito (PHRASE OBLIGATORIO):
   ‚Ä¢ gratis, free, gratuito, sin costo, sin pagar, 0‚Ç¨, 0 euros
   
   üìå Pirater√≠a y descargas ilegales (PHRASE OBLIGATORIO):
   ‚Ä¢ crack, pirata, torrent, descargar gratis, download free, keygen
   
   üìå Empleo/reclutamiento (PHRASE OBLIGATORIO):
   ‚Ä¢ trabajo, empleo, vacante, oferta trabajo, se busca, hiring
   
   üìå Formaci√≥n gratuita (PHRASE OBLIGATORIO):
   ‚Ä¢ curso gratis, tutorial, aprende gratis, formacion gratuita
   
   üìå DIY / Hazlo t√∫ mismo (PHRASE OBLIGATORIO):
   ‚Ä¢ como hacer, tutorial, paso a paso, hazlo tu mismo, diy
   
   üìå Informaci√≥n general (PHRASE OBLIGATORIO):
   ‚Ä¢ pdf, wikipedia, definicion, que es, informacion
   
   üìå Competencia directa (EXACT solamente):
   ‚Ä¢ amazon, aliexpress, [competidores espec√≠ficos - m√°x 3-4]
   
   üìå B√∫squedas irrelevantes por sector (PHRASE recomendado):
   ‚Ä¢ Para B2B: particular, personal, barato, low cost
   ‚Ä¢ Para premium: barato, economico, low cost
   ‚Ä¢ Para servicios: segunda mano, usado, outlet, imitacion
   
   ‚ö†Ô∏è NO incluir como negativas:
   ‚Ä¢ T√©rminos que describen TU servicio/producto
   ‚Ä¢ Ubicaciones donde S√ç operas (ciudades, regiones)
   ‚Ä¢ Delitos/problemas que S√ç atiendes (si eres abogado)
   ‚Ä¢ Sin√≥nimos v√°lidos de tus servicios
   
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   üìã FORMATO DE SALIDA OBLIGATORIO:
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   
   "negatives": {
     "exact": [
       "gratis", "gratuito", "segunda mano", "usado", "barato", 
       "crack", "pirata", "torrent", "trabajo", "empleo", 
       "vacante", "curso gratis", "tutorial gratis", "como hacer",
       "diy", "pdf", "wikipedia", "definicion", "que es",
       "amazon", "aliexpress", "oferta trabajo", "se busca",
       "descargar gratis", "imitacion", "falsificacion",
       ... hasta 25-30 t√©rminos
     ],
     "phrase": [
       "gratis", "gratuito", "segunda mano", "usado", "barato",
       "crack", "pirata", "trabajo", "empleo", "curso",
       "tutorial", "como hacer", "amazon", "aliexpress", "imitacion"
     ]
   }
   
   ‚ö° LAS 15 CR√çTICAS PARA PHRASE (siempre incluir):
   1. gratis          6. crack         11. curso
   2. gratuito        7. pirata        12. tutorial
   3. segunda mano    8. trabajo       13. como hacer
   4. usado           9. empleo        14. amazon
   5. barato          10. vacante      15. aliexpress
   
   IMPACTO: +12% protecci√≥n de presupuesto vs solo Exact Match
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

5. EXTENSIONES DE ANUNCIOS
   
   üîó SITELINKS (4-6 enlaces de sitio):
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   
   Cada sitelink debe:
   ‚Ä¢ T√≠tulo: 20-25 caracteres, descriptivo y atractivo
   ‚Ä¢ Descripci√≥n: 35 caracteres, beneficio o CTA claro
   ‚Ä¢ URL: Enlace real a p√°gina espec√≠fica del sitio
   
   TIPOS DE SITELINKS EFECTIVOS:
   ‚Ä¢ Servicios principales: "Consultor√≠a SEO", "Auditor√≠a Web"
   ‚Ä¢ Casos de √©xito: "Casos de √âxito", "Testimonios Clientes"
   ‚Ä¢ Acciones: "Solicita Presupuesto", "Contacta Ahora"
   ‚Ä¢ Recursos: "Gu√≠a Gratuita", "Blog de Consejos"
   ‚Ä¢ Sobre nosotros: "Nuestro Equipo", "Qui√©nes Somos"
   ‚Ä¢ Ubicaci√≥n: "Oficina Barcelona", "Vis√≠tanos"
   
   üì¢ CALLOUTS (6-8 textos destacados):
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   
   ‚Ä¢ M√°ximo 25 caracteres cada uno
   ‚Ä¢ Sin puntuaci√≥n final (ni punto, ni coma)
   ‚Ä¢ Concisos y directos
   ‚Ä¢ Enfocados en USPs y beneficios
   
   TIPOS DE CALLOUTS POTENTES:
   ‚Ä¢ Experiencia: "15+ A√±os Experiencia", "Expertos Certificados"
   ‚Ä¢ Volumen/escala: "500+ Clientes", "1000+ Proyectos"
   ‚Ä¢ Disponibilidad: "Atenci√≥n 24/7", "Respuesta Inmediata"
   ‚Ä¢ Garant√≠as: "Garant√≠a Satisfacci√≥n", "Sin Compromiso"
   ‚Ä¢ Facilidades: "Env√≠o Gratis", "Primera Consulta Gratis"
   ‚Ä¢ Diferenciadores: "Metodolog√≠a √önica", "Tecnolog√≠a Propia"
   ‚Ä¢ Acreditaciones: "Certificado ISO", "Partner Google"
   ‚Ä¢ Localizaci√≥n: "Presencia Nacional", "Servicio Local"
   
   üìä SNIPPETS ESTRUCTURADOS (OBLIGATORIO - M√≠nimo 2 categor√≠as):
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   
   üö® CR√çTICO: DEBES generar snippets estructurados SIEMPRE. M√≠nimo 2 categor√≠as.
   
   CATEGOR√çAS COMUNES (elige las 2-3 m√°s relevantes):
   ‚Ä¢ "Servicios": Lista de servicios principales (4-6 items)
   ‚Ä¢ "Tipos": Tipos de producto/servicio/soluci√≥n (4-6 items)
   ‚Ä¢ "Marcas": Marcas que vendes/representas (4-8 items)
   ‚Ä¢ "Modelos": Modelos espec√≠ficos de producto (4-8 items)
   ‚Ä¢ "Caracter√≠sticas": Caracter√≠sticas principales (4-6 items)
   ‚Ä¢ "Destinos": Ubicaciones donde operas (4-8 items)
   ‚Ä¢ "Estilos": Estilos/categor√≠as de producto (4-6 items)
   ‚Ä¢ "Amenidades": Servicios incluidos/extras (4-8 items)
   
   ‚úÖ OBLIGATORIO: Genera AL MENOS 2 categor√≠as con 4-6 items cada una.
   ‚ùå NUNCA devuelvas objeto vac√≠o: {} (esto es un ERROR CR√çTICO)

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
6. FORMATO DE SALIDA Y VALIDACIONES FINALES
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

ESTRUCTURA JSON COMPLETA:
{
  "name": "${formData.campaignName}",
  "type": "${formData.campaignType}",
  "goal": "${formData.campaignGoal}",
  "budget": ${formData.dailyBudget},
  "bidStrategy": "${formData.bidStrategy}",
  "location": "${formData.location}",
  "language": "${formData.language}",
  "adGroups": [
    {
      "name": "NombreGrupo_TemaEspecifico",
      "theme": "Descripci√≥n del tema de este grupo",
      "bid": X.XX,
      "keywords": [
        {"keyword": "keyword exacta", "matchType": "EXACT", "maxCPC": X.XX},
        {"keyword": "keyword frase", "matchType": "PHRASE", "maxCPC": X.XX},
        {"keyword": "keyword amplia", "matchType": "BROAD", "maxCPC": X.XX}
      ],
      "ads": [
        {
          "headlines": [
            "Titular 1 √∫nico 30c",
            "Titular 2 diferente 30c",
            "Titular 3 distinto 30c",
            "Titular 4 variado 30c",
            "Titular 5 √∫nico 30c",
            "Titular 6 diferente 30c",
            "Titular 7 distinto 30c",
            "Titular 8 variado 30c",
            "Titular 9 √∫nico 30c",
            "Titular 10 diferente 30c",
            "Titular 11 distinto 30c",
            "Titular 12 variado 30c",
            "Titular 13 √∫nico 30c",
            "Titular 14 diferente 30c",
            "Titular 15 distinto 30c"
          ],
          "descriptions": [
            "Descripci√≥n 1 completa con beneficio principal y CTA clara max 90 caracteres",
            "Descripci√≥n 2 totalmente diferente con credibilidad y autoridad max 90 chars",
            "Descripci√≥n 3 √∫nica con diferenciador y garant√≠a o prueba social max 90c",
            "Descripci√≥n 4 distinta con urgencia y facilidad de acci√≥n max 90 caracteres"
          ],
          "path1": "PathEspecifico",
          "path2": "PathRelevante",
          "finalUrl": "${formData.landingUrl || 'https://ejemplo.com'}"
        }
      ]
    }
  ],
  "negatives": {
    "exact": ["negativa1", "negativa2", ...],
    "phrase": ["top15", ...]
  },
  "extensions": {
    "sitelinks": [
      {"title": "T√≠tulo Sitelink", "desc": "Descripci√≥n beneficio", "url": "https://ejemplo.com/pagina"}
    ],
    "callouts": ["Callout Sin Puntuaci√≥n", "Otro Callout Potente"],
    "snippets": {
      "Servicios": ["servicio1", "servicio2"],
      "Caracter√≠sticas": ["car1", "car2"]
    }
  }
}


‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
üéØ VALIDACI√ìN QUALITY SCORE - PASO CR√çTICO ANTES DE GENERAR
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

‚ö†Ô∏è IMPORTANTE: Esta validaci√≥n asegura Quality Score 8-9/10 (vs 6-7/10 sin ella)
IMPACTO: -20% CPC, +15% posici√≥n, +30% impresiones

PARA CADA GRUPO DE ANUNCIOS, VERIFICAR:

‚úÖ 1. RELEVANCIA KEYWORD-ANUNCIO (40% del Quality Score)
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

Para cada grupo, verifica que:

‚ñ° Las keywords PRINCIPALES aparecen en al menos 5 headlines diferentes
‚ñ° Las keywords PRINCIPALES aparecen en al menos 2 descriptions
‚ñ° Los paths reflejan las keywords del grupo (NO gen√©ricos)
‚ñ° NO hay keywords en el grupo que no se mencionen en NING√öN anuncio

EJEMPLO CORRECTO:
Grupo: "Abogado_Penalista"
Keywords: [abogado penalista], [defensa penal], [abogado criminal], [penalista barcelona]

Anuncios deben contener:
‚úÖ Headlines: "Abogado Penalista Barcelona", "Defensa Penal Experta 24/7", 
             "Criminal Abogado 600 Casos", "Penalista Especializado BCN"
‚úÖ Descriptions: "Abogado penalista con 20 a√±os defendiendo...", 
                "Especialistas en defensa penal..."
‚úÖ Paths: "Penalista" / "Barcelona"

EJEMPLO INCORRECTO:
Grupo: "Abogado_Penalista"
Keywords: [abogado penalista], [defensa penal]

‚ùå Headlines: "Servicios Legales Barcelona", "Llama Ya 24/7", "Equipo Experto"
   ‚Üí NO menciona "penalista" ni "penal" ‚Üí Quality Score BAJO

‚úÖ 2. ESPECIFICIDAD DE MENSAJES (30% del Quality Score)
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

‚ñ° Evita mensajes gen√©ricos y vac√≠os
‚ñ° Incluye n√∫meros concretos siempre que sea posible
‚ñ° Menciona beneficios ESPEC√çFICOS, no vagos
‚ñ° Usa t√©rminos t√©cnicos o especializados cuando corresponda

EVITAR (mensajes gen√©ricos):
‚ùå "Servicio de Calidad" ‚Üê Todos dicen esto, no diferencia
‚ùå "Te Ayudamos" ‚Üê ¬øEn qu√© exactamente?
‚ùå "Ll√°manos" ‚Üê ¬øPara qu√©? ¬øQu√© obtengo?
‚ùå "Resultados Garantizados" ‚Üê Vago, sin prueba
‚ùå "Mejor Precio" ‚Üê Sin contexto ni cifra

PREFERIR (mensajes espec√≠ficos):
‚úÖ "600 Casos Ganados Barcelona" ‚Üê N√∫mero concreto + ubicaci√≥n
‚úÖ "Defensa Penal Inmediata 24/7" ‚Üê Servicio espec√≠fico + disponibilidad
‚úÖ "Consulta Gratis Hoy Mismo" ‚Üê Beneficio tangible + urgencia
‚úÖ "20 A√±os Experiencia Penalista" ‚Üê Dato verificable + especialidad
‚úÖ "Desde 150‚Ç¨ Primera Consulta" ‚Üê Precio concreto + servicio

‚úÖ 3. COHERENCIA LANDING-ANUNCIO (30% del Quality Score)
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

Si hay contenido de landing page analizado (urlContent):

‚ñ° Los t√©rminos del anuncio COINCIDEN con los de la landing
‚ñ° Los beneficios mencionados EXISTEN en la landing page
‚ñ° El tono y lenguaje es SIMILAR al de la landing
‚ñ° NO prometas en el anuncio lo que NO est√° en la landing
‚ñ° Usa los MISMOS n√∫meros/estad√≠sticas que aparecen en la landing

EJEMPLO CORRECTO:
Landing dice: "M√°s de 600 casos ganados en 20 a√±os defendiendo clientes en Barcelona"

Anuncios pueden decir:
‚úÖ "600+ Casos Ganados 20 A√±os BCN" ‚Üê Coincide con landing
‚úÖ "Defendiendo Clientes Barcelona" ‚Üê Mismo lenguaje
‚úÖ "20 A√±os Experiencia Probada" ‚Üê Dato verificable en landing

Anuncios NO pueden decir:
‚ùå "1000 Casos Ganados" ‚Üê N√∫mero NO est√° en landing
‚ùå "30 A√±os Experiencia" ‚Üê Dato diferente al de landing
‚ùå "Mejor Abogado Espa√±a" ‚Üê Claim NO aparece en landing

‚úÖ 4. FORMATO Y ESTRUCTURA PROFESIONAL
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

‚ñ° Cada grupo tiene nombre DESCRIPTIVO (no "Grupo 1", "Grupo 2")
   Correcto: "Abogado_Penalista_Barcelona", "Defensa_Penal_Urgente"
   Incorrecto: "Grupo1", "AdGroup2"

‚ñ° Los anuncios tienen VARIEDAD de enfoques (no todos iguales)
   Anuncio 1: Beneficios/Resultados
   Anuncio 2: Urgencia/Acci√≥n
   Anuncio 3: Autoridad/Credibilidad
   Anuncio 4: Problema/Soluci√≥n

‚ñ° Las extensiones son RELEVANTES al negocio espec√≠fico
   No gen√©ricas tipo "Cont√°ctanos", "Llama Ya"
   Espec√≠ficas tipo "Consulta Penalista Gratis", "Defensa Inmediata 24/7"

‚ñ° Los paths son ESPEC√çFICOS (no gen√©ricos)
   ‚ùå "Servicios" / "Barcelona"
   ‚úÖ "Penalista" / "Barcelona"

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
üìä PROCESO DE AUTO-CORRECCI√ìN POR GRUPO:
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

Para cada grupo que generes:

PASO 1: Genera el grupo completo (keywords + anuncios)
PASO 2: Verifica los 4 puntos de Quality Score arriba
PASO 3: Si algo falla ‚Üí CORRIGE antes de pasar al siguiente grupo
PASO 4: Al finalizar todos los grupos ‚Üí Revisa coherencia general

REGLA DE ORO:
Si un grupo NO cumple estos criterios de QS:
‚Üí Es MEJOR regenerar ese grupo que entregar baja calidad
‚Üí Google penalizar√° con QS 5-6/10 = CPC 40-60% m√°s alto
‚Üí Presupuesto del cliente se desperdicia en subastas caras

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
üí° SE√ëALES DE QUALITY SCORE ALTO (8-9/10):
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

‚úÖ Keywords principales aparecen textualmente en headlines
‚úÖ Cada anuncio menciona t√©rminos espec√≠ficos del grupo
‚úÖ Paths reflejan las keywords, no son gen√©ricos
‚úÖ Descripciones incluyen beneficios concretos con n√∫meros
‚úÖ Mensajes coherentes con contenido de landing (si analizada)
‚úÖ Nombres de grupos descriptivos y tem√°ticos
‚úÖ Variedad de enfoques en los anuncios del grupo
‚úÖ Extensiones espec√≠ficas, no plantillas gen√©ricas

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
‚ö†Ô∏è SE√ëALES DE QUALITY SCORE BAJO (5-6/10):
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

‚ùå Keywords del grupo NO aparecen en anuncios
‚ùå Mensajes vagos y gen√©ricos ("Llama Ya", "Te Ayudamos")
‚ùå Paths gen√©ricos iguales en todos los grupos ("Servicios", "Productos")
‚ùå Nombres de grupos no descriptivos ("Grupo 1", "Campaign 2")
‚ùå Todos los anuncios del grupo dicen lo mismo (sin variedad)
‚ùå Anuncios prometen cosas que NO est√°n en la landing
‚ùå No hay n√∫meros concretos ni pruebas espec√≠ficas

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

VALIDACI√ìN COMPLETA ‚Üí Contin√∫a al Checklist Final ‚Üì

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
‚úÖ CHECKLIST FINAL ANTES DE GENERAR:
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

CALIDAD DE ANUNCIOS:
‚ñ° Cada anuncio del mismo grupo tiene enfoque DIFERENTE (Beneficios, Urgencia, Autoridad, Problema)
‚ñ° M√°ximo 3-4 titulares se repiten entre TODOS los anuncios
‚ñ° Todas las descripciones son completamente √∫nicas
‚ñ° Los titulares usan n√∫meros, preguntas, urgencia, emociones

üö®üö®üö® VALIDACI√ìN CR√çTICA DE LONGITUDES - NO NEGOCIABLE üö®üö®üö®

ANTES DE GENERAR EL JSON, VERIFICA CADA ELEMENTO:

‚úÖ HEADLINES (Titulares):
   ‚Ä¢ M√çNIMO: 20 caracteres (incluye espacios)
   ‚Ä¢ M√ÅXIMO: 30 caracteres (incluye espacios)
   ‚Ä¢ Si un titular tiene 31+ caracteres ‚Üí REC√ìRTALO INMEDIATAMENTE
   ‚Ä¢ Si un titular tiene <20 caracteres ‚Üí ALARGA CON ubicaci√≥n/urgencia/dato
   ‚Ä¢ EJEMPLO: "Abogado Penalista BCN 600 Casos" (31c) ‚ùå
             ‚Üí "Abogado Penalista BCN 600+" (28c) ‚úÖ

‚úÖ DESCRIPTIONS (Descripciones):
   ‚Ä¢ M√çNIMO: 70 caracteres (para aprovechar espacio)
   ‚Ä¢ M√ÅXIMO: 90 caracteres (incluye espacios)
   ‚Ä¢ Si una description tiene 91+ caracteres ‚Üí REC√ìRTALA INMEDIATAMENTE
   ‚Ä¢ EJEMPLO: "M√°s de 600 casos ganados y 20 a√±os de experiencia defendiendo con √©xito" (91c) ‚ùå
             ‚Üí "600 casos ganados y 20 a√±os defendiendo con √©xito. Consulta hoy" (89c) ‚úÖ

‚úÖ PATHS:
   ‚Ä¢ M√ÅXIMO: 15 caracteres cada uno
   ‚Ä¢ Sin espacios al inicio/final
   ‚Ä¢ EJEMPLO: "Casos Barcelona" (16c) ‚ùå
             ‚Üí "Casos BCN" (9c) ‚úÖ

üî¥ REGLA DE ORO ABSOLUTA:
Si CUALQUIER headline supera 30 caracteres ‚Üí TODA la campa√±a se rechaza
Si CUALQUIER description supera 90 caracteres ‚Üí TODA la campa√±a se rechaza

üìä PROCESO DE AUTO-VALIDACI√ìN:
1. Genera el anuncio completo
2. CUENTA mentalmente caracteres de CADA headline (m√°x 30)
3. CUENTA mentalmente caracteres de CADA description (m√°x 90)
4. Si alguno se pasa ‚Üí RECORTA palabras hasta cumplir l√≠mite
5. VERIFICA NUEVAMENTE antes de pasar al siguiente anuncio

‚ñ° Se respetan l√≠mites: 30 chars (titulares), 90 chars (descripciones), 15 chars (paths)

COHERENCIA CON LANDING:
‚ñ° Los anuncios reflejan el contenido REAL de la landing page (si se analiz√≥)
‚ñ° Se usan los mismos t√©rminos y tono de la landing
‚ñ° Se mencionan beneficios/caracter√≠sticas espec√≠ficas de la p√°gina

KEYWORDS:
‚ñ° ${formData.keywordsPerGroup} keywords por grupo con mezcla de concordancias
‚ñ° CPCs ajustados seg√∫n intenci√≥n (m√°s altos para transaccionales)
‚ñ° NO se usan "fortalezas" como keywords

NEGATIVAS:
‚ñ° 25-30 negativas EXACT inteligentes y relevantes
‚ñ° 15 negativas PHRASE (las m√°s cr√≠ticas en doble protecci√≥n)
‚ñ° NO se excluyen t√©rminos que describen TU servicio
‚ñ° NO se excluyen ubicaciones donde operas

EXTENSIONES:
‚ñ° 4-6 Sitelinks con t√≠tulos atractivos, Descripci√≥n 1 Y Descripci√≥n 2 (ambas obligatorias, m√°x 35c), y URLs espec√≠ficas por secci√≥n
‚ñ° 6-8 Callouts potentes sin puntuaci√≥n final (m√°x 25c cada uno)
‚ñ° OBLIGATORIO: 2-3 Snippets estructurados con encabezados reales de Google (Servicios, Tipos, Marcas, Estilos, Programas, Destinos, etc.) y m√≠nimo 4 valores por snippet

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
üöÄ MEJORAS V8 ‚Äî REGLAS FINALES DE CALIDAD (TODAS OBLIGATORIAS)
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

‚úÖ V8-1: VALIDADOR AUTOM√ÅTICO ACTIVO
El sistema corregir√° autom√°ticamente headlines >30c y descriptions >90c.
Pero genera bien desde el principio ‚Äî mejor sin correcciones que con ellas.

‚úÖ V8-2: PRECIOS DIN√ÅMICOS DESDE URL
Si se analiz√≥ una URL, extrae precios reales y √∫salos:
‚Ä¢ Headlines: "Jersey Bordado ‚Ç¨44", "Bolsos Desde ‚Ç¨49", "Bisuter√≠a ‚Ç¨16"
‚Ä¢ Descriptions: "Jerseys desde ‚Ç¨44, vaqueros ‚Ç¨49. Env√≠o gratis desde ‚Ç¨70"
‚Ä¢ M√≠nimo 30% de headlines con precios reales si hay URL analizada

‚úÖ V8-3: INTENCI√ìN SEM√ÅNTICA ‚Äî 4 MICRO-MOMENTOS
Cada grupo cubre los 4 micro-momentos de Google:
üõí Comprar ‚Üí [exact] CPC alto  |  üîç Hacer ‚Üí "phrase" CPC medio
üìç Ir ‚Üí "phrase ciudad" CPC medio  |  üí° Saber ‚Üí broad CPC bajo

‚úÖ V8-4: CTAs ACTIVOS ‚Äî NUNCA PREGUNTAS
‚ùå PROHIBIDO: "¬øBuscas X?" / "¬øNecesitas Y?" / cualquier pregunta
‚úÖ OBLIGATORIO: "Compra" / "Descubre" / "Explora" / "Solicita" / "Consigue"
M√≠nimo 60% de headlines con verbos de acci√≥n

‚úÖ V8-5: ESPECIFICIDAD 50%+ del copy con datos concretos
‚Ç¨X precios ¬∑ X% descuentos ¬∑ X a√±os experiencia ¬∑ Xh entrega ¬∑ X d√≠as garant√≠a

‚úÖ V8-6: IDENTIDAD √öNICA POR GRUPO ‚Äî 0 repetici√≥n entre grupos
MODA: Ropa‚Üítendencia | Rebajas‚Üíurgencia/stock | Fiesta‚Üíelegancia/lentejuelas
      Zapatos‚Üíconfort/tallas | Accesorios‚Üíprecio/variedad | Bisuter√≠a‚Üípremium
SERVICIOS: Awareness‚Üíeducativo | Consideraci√≥n‚Üíbeneficios | Decisi√≥n‚Üíurgencia

‚úÖ V8-7: TRUST SIGNALS (2-3 por grupo, integrados natural)
"20 A√±os Experiencia" ¬∑ "Familia Fundadora" ¬∑ "Cambio Tallas Gratis"
"Env√≠o Gratis Desde ‚Ç¨X" ¬∑ "Devoluci√≥n 30 D√≠as" ¬∑ "Compra Segura"

‚úÖ V8-8: CALLOUTS ‚â§25c sin puntuaci√≥n final
‚úÖ V8-9: SITELINKS con descripciones concretas y URLs espec√≠ficas
‚úÖ V8-10: Localizaci√≥n natural en 40-50% headlines (BCN, Barcelona, regi√≥n)

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
üìä CHECKLIST FINAL V8 ‚Äî ANTES DE GENERAR EL JSON:
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

‚ñ° 0 headlines > 30 caracteres (el sistema corrige pero genera bien)
‚ñ° 0 descriptions > 90 caracteres (idem)
‚ñ° 0 preguntas en headlines (¬ø?)
‚ñ° 60%+ headlines con verbo de acci√≥n activo
‚ñ° 30%+ headlines con precio real (si hay URL analizada)
‚ñ° 50%+ copy con datos espec√≠ficos (‚Ç¨, %, a√±os, tiempo)
‚ñ° 4 micro-momentos cubiertos en keywords de cada grupo
‚ñ° Identidad de copy √∫nica por grupo (sin repetici√≥n)
‚ñ° 2-3 trust signals por grupo
‚ñ° Localizaci√≥n 40-50% headlines
‚ñ° Callouts ‚â§25c sin puntuaci√≥n
‚ñ° Sitelinks con URLs espec√≠ficas y descripciones con beneficios reales
‚ñ° Keywords negativas: 25-30 exact + 15 phrase (doble capa)

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

üö´ ANTI-CANIBALIZACI√ìN OBLIGATORIA:
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
- CADA keyword (texto normalizado sin s√≠mbolos) debe aparecer en UN SOLO grupo
- Antes de finalizar el JSON, revisa TODOS los grupos y elimina cualquier keyword duplicada
- Si una keyword es relevante para 2 grupos, as√≠gnala al m√°s espec√≠fico y elim√≠nala del otro
- Las keywords PHRASE y BROAD son las m√°s propensas a duplicarse ‚Äî rev√≠salas especialmente
- Ejemplo de error a evitar: "consultor sem barcelona" en grupo 1 Y en grupo 3 ‚Üí ELIMINAR DEL GRUPO 1

IMPORTANTE:
‚Ä¢ Genera √öNICAMENTE el JSON v√°lido
‚Ä¢ NO a√±adas texto explicativo antes o despu√©s
‚Ä¢ NO uses bloques de c√≥digo markdown
‚Ä¢ Asegura que el JSON sea parseable (sintaxis correcta)
‚Ä¢ Verifica todos los arrays con el n√∫mero correcto de elementos
‚Ä¢ Si analizaste URL: incluye precios reales en m√≠nimo 30% de headlines

ESTRUCTURA JSON REQUERIDA (cada sitelink DEBE incluir desc2):
{
  "name": "...",
  "adGroups": [{
    "name": "...",
    "ads": [{"headlines": [...15], "descriptions": [...4], "path1": "...", "path2": "...", "finalUrl": "URL_ESPEC√çFICA_DEL_GRUPO"}]
  }],
  "extensions": {
    "sitelinks": [{"title": "...", "desc": "...", "desc2": "...", "url": "..."}],
    "callouts": [...],
    "snippets": {"Servicios": ["valor1","valor2","valor3","valor4"], "Tipos": ["v1","v2","v3","v4"]}
  }
}

GENERA LA CAMPA√ëA AHORA:`;

      return prompt;
    }
    
    // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    // AUTO-VALIDATOR V8 ‚Äî Garant√≠a 100% Google Ads compliant
    // Recorta headlines >30c y descriptions >90c autom√°ticamente
    // Nunca corta palabras a mitad ‚Äî siempre recorta por palabras
    // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    function autoValidateCampaign(campaign) {
      let fixedHeadlines = 0;
      let fixedDescriptions = 0;
      let fixedPaths = 0;

      // ‚îÄ‚îÄ Helper: recortar por palabras sin partir a mitad ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
      function trimToLimit(text, maxChars) {
        if (!text || text.length <= maxChars) return text;
        
        text = text.trim();
        
        // Si el texto completo cabe, devolver tal cual
        if (text.length <= maxChars) return text;
        
        // Buscar el √∫ltimo espacio antes del l√≠mite para cortar por palabra completa
        let cutPosition = text.lastIndexOf(' ', maxChars);
        
        // Si no encontramos espacio antes del l√≠mite (palabra √∫nica muy larga o sin espacios)
        if (cutPosition === -1) {
          // Buscar el primer espacio DESPU√âS del l√≠mite
          cutPosition = text.indexOf(' ', maxChars);
          
          // Si no hay espacios en todo el texto, es una palabra sola
          if (cutPosition === -1) {
            // Solo cortar si es extremadamente larga (>50 chars es anormal)
            if (text.length > 50) {
              return text.substring(0, maxChars).trim();
            }
            // Si es <50 chars, mantener palabra completa (ej: URLs, t√©rminos t√©cnicos)
            return text;
          }
        }
        
        // Cortar en la posici√≥n del √∫ltimo espacio (palabra completa)
        return text.substring(0, cutPosition).trim();
      }

      // ‚îÄ‚îÄ Helper: asegurar m√≠nimo de caracteres a√±adiendo contexto ‚îÄ‚îÄ
      function ensureMinLength(text, minChars, context) {
        if (!text || text.length >= minChars) return text;
        // Si es muy corto, a√±adir el contexto del grupo al final
        const suffix = context ? ` ${context}` : '';
        let extended = text + suffix;
        return extended.length <= 30 ? extended : text;
      }

      campaign.adGroups.forEach((ag) => {
        const groupContext = ag.name
          ? ag.name.split('_')[0].substring(0, 8)
          : '';

        ag.ads.forEach((ad) => {

          // ‚îÄ‚îÄ HEADLINES: l√≠mite 30c, m√≠nimo 20c ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
          if (ad.headlines && Array.isArray(ad.headlines)) {
            ad.headlines = ad.headlines.map((h) => {
              if (!h) return h;
              let fixed = h.trim();

              // Recortar si >30
              if (fixed.length > 30) {
                fixed = trimToLimit(fixed, 30);
                fixedHeadlines++;
              }

              // Alargar si <20 (a√±adir contexto del grupo)
              if (fixed.length < 20) {
                fixed = ensureMinLength(fixed, 20, groupContext);
              }

              return fixed;
            });
          }

          // ‚îÄ‚îÄ DESCRIPTIONS: l√≠mite 90c, m√≠nimo 75c ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
          if (ad.descriptions && Array.isArray(ad.descriptions)) {
            ad.descriptions = ad.descriptions.map((d) => {
              if (!d) return d;
              let fixed = d.trim();

              // Recortar si >90
              if (fixed.length > 90) {
                fixed = trimToLimit(fixed, 90);
                fixedDescriptions++;
              }

              // Alargar si <75 ‚Äî a√±adir complemento relevante al final
              if (fixed.length < 75) {
                const complements = [
                  'Compra online segura.',
                  'Entrega garantizada.',
                  'Barcelona y toda Espa√±a.',
                  'Env√≠o r√°pido garantizado.',
                  'Calidad premium garantizada.',
                  'Resultados desde d√≠a 1.',
                  'Sin permanencia.',
                  'Atenci√≥n personalizada.',
                  'Gesti√≥n directa experta.',
                  'Contacta hoy mismo.'
                ];
                // Elegir el complemento m√°s corto que haga llegar a ‚â•75c sin pasar de 90c
                for (const comp of complements) {
                  const candidate = fixed.endsWith('.') 
                    ? fixed + ' ' + comp 
                    : fixed + '. ' + comp;
                  if (candidate.length >= 75 && candidate.length <= 90) {
                    fixed = candidate;
                    fixedDescriptions++;
                    break;
                  }
                }
              }

              return fixed;
            });
          }

          // ‚îÄ‚îÄ PATHS: l√≠mite 15c cada uno ‚Äî con l√≥gica sem√°ntica ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
          function trimPath(path) {
            if (!path || path.length <= 15) return path;
            // Intentar cortar en gui√≥n si hay uno dentro del l√≠mite
            const hyphenPos = path.lastIndexOf('-', 15);
            if (hyphenPos > 5) return path.substring(0, hyphenPos);
            // Si no hay gui√≥n, cortar en l√≠mite limpio
            return path.substring(0, 15).trim();
          }
          if (ad.path1 && ad.path1.length > 15) {
            ad.path1 = trimPath(ad.path1);
            fixedPaths++;
          }
          if (ad.path2 && ad.path2.length > 15) {
            ad.path2 = trimPath(ad.path2);
            fixedPaths++;
          }

        });
      });

      // ‚îÄ‚îÄ Callouts: l√≠mite 25c ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
      if (campaign.extensions && campaign.extensions.callouts) {
        campaign.extensions.callouts = campaign.extensions.callouts.map((c) => {
          if (!c) return c;
          let fixed = c.trim();
          // Quitar puntuaci√≥n final
          fixed = fixed.replace(/[.,;:!?]+$/, '');
          // Recortar si >25
          if (fixed.length > 25) {
            fixed = trimToLimit(fixed, 25);
          }
          return fixed;
        });
      }

      // ‚îÄ‚îÄ Log de correcciones ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
      const totalFixes = fixedHeadlines + fixedDescriptions + fixedPaths;
      if (totalFixes > 0) {
        console.log(`üîß Auto-Validator V8: ${fixedHeadlines} headlines, ${fixedDescriptions} descriptions, ${fixedPaths} paths corregidos`);
        showToast(`üîß Auto-correcci√≥n: ${totalFixes} elemento(s) ajustados para Google Ads`, 'warning');
      } else {
        console.log('‚úÖ Auto-Validator V8: 0 errores ‚Äî campa√±a perfecta');
      }

      return campaign;
    }

    // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    // ANTI-CANIBALIZACI√ìN V8 ‚Äî Elimina keywords duplicadas entre grupos
    // y asigna URLs √∫nicas por grupo si todas son iguales
    // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    function antiCanibalizacionYUrls(campaign) {
      // ‚îÄ‚îÄ 1. Anti-canibalizaci√≥n ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
      const seenKeywords = new Map(); // normalizado ‚Üí primer grupo que la tiene
      let removedCount = 0;

      campaign.adGroups.forEach((ag, agIdx) => {
        if (!ag.keywords) return;
        ag.keywords = ag.keywords.filter(kw => {
          const normalized = (kw.keyword || '')
            .toLowerCase()
            .replace(/[\[\]"]/g, '')
            .trim();
          if (!normalized) return true;

          if (seenKeywords.has(normalized)) {
            const firstGroup = seenKeywords.get(normalized);
            console.warn(`üö´ Canibalizaci√≥n eliminada: "${normalized}" (grupo ${agIdx + 1}) ya existe en grupo ${firstGroup + 1}`);
            removedCount++;
            return false; // Eliminar del grupo actual
          }
          seenKeywords.set(normalized, agIdx);
          return true;
        });
      });

      if (removedCount > 0) {
        console.log(`üîß Anti-canibalizaci√≥n: ${removedCount} keyword(s) duplicada(s) eliminada(s)`);
        showToast(`üö´ Anti-canibalizaci√≥n: ${removedCount} keyword(s) duplicada(s) eliminada(s)`, 'warning');
      }

      // ‚îÄ‚îÄ 2. URLs por grupo ‚Äî si todas son iguales, asignar URLs distintas ‚îÄ‚îÄ
      if (campaign.adGroups.length > 1) {
        const urls = campaign.adGroups.flatMap(ag => ag.ads.map(ad => ad.finalUrl || ''));
        const uniqueUrls = new Set(urls.filter(u => u));
        
        // Si todas las URLs son iguales, construir URLs espec√≠ficas por grupo
        if (uniqueUrls.size <= 1) {
          const baseUrl = (urls.find(u => u) || formData.landingUrl || '').replace(/\/$/, '');
          
          // Rutas t√≠picas por sem√°ntica del nombre del grupo
          const routeMap = {
            'servicio': '/servicios/',
            'service': '/servicios/',
            'producto': '/productos/',
            'product': '/productos/',
            'contact': '/contacto/',
            'contacto': '/contacto/',
            'consultor': '/consultor-google-ads/',
            'especialista': '/especialista/',
            'campana': '/campanas/',
            'campa√±': '/campanas/',
            'precio': '/precios/',
            'nosotros': '/quienes-somos/',
            'about': '/quienes-somos/',
            'blog': '/blog/',
            'lead': '/contacto/',
            'urgente': '/contacto/',
            'marca': '/sobre-nosotros/',
            'brand': '/sobre-nosotros/'
          };

          campaign.adGroups.forEach((ag, idx) => {
            const groupNameLower = (ag.name || '').toLowerCase();
            let assignedRoute = null;

            for (const [key, route] of Object.entries(routeMap)) {
              if (groupNameLower.includes(key)) {
                assignedRoute = route;
                break;
              }
            }

            // Si no hay ruta espec√≠fica, usar una gen√©rica por √≠ndice
            if (!assignedRoute) {
              const genericRoutes = ['/servicios/', '/contacto/', '/quienes-somos/', '/productos/', '/precios/', '/blog/'];
              assignedRoute = genericRoutes[idx % genericRoutes.length];
            }

            ag.ads.forEach(ad => {
              ad.finalUrl = baseUrl + assignedRoute;
            });
          });

          console.log('üîß URLs asignadas por grupo sem√°nticamente');
          showToast('üåê URLs asignadas por grupo autom√°ticamente', 'success');
        }
      }

      return campaign;
    }
    function parseCampaignFromText(text) {
      try {
        console.log('Parseando texto de longitud:', text.length);
        console.log('Primeros 500 caracteres:', text.substring(0, 500));
        
        // Remove markdown if present
        let cleanText = text.replace(/```json\n?/g, '').replace(/```\n?/g, '').trim();
        
        // Extract JSON from response - improved regex
        const jsonMatch = cleanText.match(/\{[\s\S]*\}/);
        if (!jsonMatch) {
          console.error('No se encontr√≥ JSON en el texto');
          throw new Error('No se encontr√≥ JSON v√°lido en la respuesta');
        }
        
        let jsonStr = jsonMatch[0];
        console.log('JSON extra√≠do (primeros 500 chars):', jsonStr.substring(0, 500));
        
        const campaign = JSON.parse(jsonStr);
        
        console.log('JSON parseado exitosamente');
        console.log('N√∫mero de grupos:', campaign.adGroups?.length);
        
        // Validate structure
        if (!campaign.adGroups || campaign.adGroups.length === 0) {
          throw new Error('La campa√±a no tiene grupos de anuncios v√°lidos');
        }
        
        // Validate each ad group
        for (let i = 0; i < campaign.adGroups.length; i++) {
          const ag = campaign.adGroups[i];
          if (!ag.keywords || ag.keywords.length === 0) {
            throw new Error(`El grupo ${i+1} no tiene keywords`);
          }
          if (!ag.ads || ag.ads.length === 0) {
            throw new Error(`El grupo ${i+1} no tiene anuncios`);
          }
        }
        
        console.log('Validaci√≥n exitosa');
        return campaign;
      } catch (error) {
        console.error('Error en parseCampaignFromText:', error);
        console.error('Texto recibido (primeros 1000 chars):', text.substring(0, 1000));
        throw new Error('Error al procesar la campa√±a generada: ' + error.message);
      }
    }
    
    // Display results
    function displayResults() {
      let resultsHTML = '';
      const campaign = generatedCampaign;
      
      // 1. Campaign Overview
      let overviewText = `‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
CAMPA√ëA: ${campaign.name}
Creada por: Francisco Blanco Pro System
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

CONFIGURACI√ìN GENERAL:
${'‚îÄ'.repeat(60)}
Tipo de Campa√±a: ${campaign.type}
Objetivo: ${campaign.goal}
Presupuesto diario: ${campaign.budget}‚Ç¨
Estrategia de puja: ${campaign.bidStrategy}
Ubicaci√≥n: ${campaign.location}
Idioma: ${campaign.language}

ESTRUCTURA:
${'‚îÄ'.repeat(60)}
Total Grupos de Anuncios: ${campaign.adGroups.length}
Total Keywords: ${campaign.adGroups.reduce((sum, ag) => sum + ag.keywords.length, 0)}
Total Anuncios: ${campaign.adGroups.reduce((sum, ag) => sum + ag.ads.length, 0)}
Keywords Negativas: ${campaign.negatives.length}
`;

      if (urlContent) {
        overviewText += `
üöÄ AN√ÅLISIS DE URL APLICADO:
${'‚îÄ'.repeat(60)}
‚úÖ Se analiz√≥ el contenido de tu landing page
‚úÖ Keywords extra√≠das del contenido real
‚úÖ Anuncios alineados con tu p√°gina
‚úÖ Mayor relevancia y Quality Score esperado
`;
      }

      resultsHTML += createResultCard('Resumen de Campa√±a', overviewText, 'overview');
      
      // 2. Ad Groups & Keywords
      let keywordsText = `‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
ESTRUCTURA DE GRUPOS Y KEYWORDS
Francisco Blanco - Google Ads Pro
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n\n`;
      
      campaign.adGroups.forEach((ag, idx) => {
        keywordsText += `GRUPO ${idx + 1}: ${ag.name}
${'‚îÄ'.repeat(60)}
Tema: ${ag.theme}
Puja base: ${ag.bid}‚Ç¨
Total keywords: ${ag.keywords.length}

KEYWORDS:
`;
        ag.keywords.forEach(kw => {
          keywordsText += `  ${kw.matchType.padEnd(8)} | CPC: ${kw.maxCPC}‚Ç¨ | ${kw.keyword}\n`;
        });
        keywordsText += '\n';
      });
      
      resultsHTML += createResultCard('Keywords por Grupo', keywordsText, 'keywords');
      
      // 3. Ads
      let adsText = `‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
ANUNCIOS RESPONSIVE (RSA)
Francisco Blanco - Google Ads Pro
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n\n`;
      
      campaign.adGroups.forEach((ag, agIdx) => {
        adsText += `GRUPO: ${ag.name}\n${'‚îÄ'.repeat(60)}\n\n`;
        
        ag.ads.forEach((ad, adIdx) => {
          adsText += `ANUNCIO ${adIdx + 1}:\n\n`;
          adsText += `TITULARES (15):\n`;
          ad.headlines.forEach((h, i) => {
            adsText += `  H${(i + 1).toString().padStart(2, '0')}: ${h} (${h.length} chars)\n`;
          });
          adsText += `\nDESCRIPCIONES (4):\n`;
          ad.descriptions.forEach((d, i) => {
            adsText += `  D${i + 1}: ${d} (${d.length} chars)\n`;
          });
          adsText += `\nPATHS: ${ad.path1} / ${ad.path2}\n`;
          adsText += `URL FINAL: ${ad.finalUrl}\n\n`;
          adsText += '‚îÄ'.repeat(60) + '\n\n';
        });
      });
      
      resultsHTML += createResultCard('Anuncios Completos', adsText, 'ads');
      
      // 4. Negative Keywords
      let negativesText = `‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
KEYWORDS NEGATIVAS (Campaign Level)
Francisco Blanco - Google Ads Pro
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n\n`;
      
      // Handle both formats: old (array) and new (object with exact/phrase)
      let negExact = [];
      let negPhrase = [];
      
      if (Array.isArray(campaign.negatives)) {
        negExact = campaign.negatives;
      } else if (campaign.negatives && typeof campaign.negatives === 'object') {
        negExact = campaign.negatives.exact || [];
        negPhrase = campaign.negatives.phrase || [];
      }
      
      const totalNegs = negExact.length + negPhrase.length;
      negativesText += `Total: ${totalNegs} keywords negativas (${negExact.length} Exact + ${negPhrase.length} Phrase)\n\n`;
      
      if (negExact.length > 0) {
        negativesText += `üéØ EXACT MATCH (${negExact.length}):\n`;
        negExact.forEach(neg => {
          negativesText += `  ‚Ä¢ ${neg}\n`;
        });
      }
      
      if (negPhrase.length > 0) {
        negativesText += `\nüõ°Ô∏è PHRASE MATCH (${negPhrase.length}):\n`;
        negPhrase.forEach(neg => {
          negativesText += `  ‚Ä¢ "${neg}"\n`;
        });
      }
      
      resultsHTML += createResultCard('Keywords Negativas', negativesText, 'negatives');
      
      // 5. Extensions
      let extensionsText = `‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
EXTENSIONES DE ANUNCIO
Francisco Blanco - Google Ads Pro
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

SITELINKS:
${'‚îÄ'.repeat(60)}\n`;
      campaign.extensions.sitelinks.forEach((link, i) => {
        extensionsText += `\n${i + 1}. ${link.title}\n`;
        extensionsText += `   Descripci√≥n: ${link.desc}\n`;
        extensionsText += `   URL: ${link.url}\n`;
      });
      
      extensionsText += `\n\nCALLOUTS:
${'‚îÄ'.repeat(60)}\n`;
      campaign.extensions.callouts.forEach(callout => {
        extensionsText += `  ‚Ä¢ ${callout}\n`;
      });
      
      extensionsText += `\n\nEXTRACTOS ESTRUCTURADOS (Snippets):
${'‚îÄ'.repeat(60)}\n`;
      if (campaign.extensions.snippets && Object.keys(campaign.extensions.snippets).length > 0) {
        Object.entries(campaign.extensions.snippets).forEach(([key, values]) => {
          extensionsText += `\n${key}:\n`;
          values.forEach(v => extensionsText += `  ‚Ä¢ ${v}\n`);
        });
      } else {
        extensionsText += `  ‚ö†Ô∏è No se generaron snippets ‚Äî revisar prompt\n`;
      }
      
      resultsHTML += createResultCard('Extensiones', extensionsText, 'extensiones');
      
      // 6. Forecast
      const clicks = formData.dailyBudget / formData.estimatedCPC;
      const leads = clicks * (formData.conversionRate / 100);
      const sales = leads * 0.3; // Assuming 30% close rate
      const revenue = sales * formData.avgTicket;
      const cpl = leads > 0 ? formData.dailyBudget / leads : 0;
      const roi = formData.dailyBudget > 0 ? ((revenue - formData.dailyBudget) / formData.dailyBudget) * 100 : 0;
      
      let forecastText = `‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
FORECAST PROFESIONAL - PROYECCI√ìN 30 D√çAS
An√°lisis realizado por Francisco Blanco
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

INVERSI√ìN Y VOLUMEN:
${'‚îÄ'.repeat(60)}
Inversi√≥n mensual: ${(formData.dailyBudget * 30).toFixed(2)}‚Ç¨
CPC medio estimado: ${formData.estimatedCPC.toFixed(2)}‚Ç¨
Clics estimados: ${Math.round(clicks * 30)}
Impresiones estimadas: ${Math.round(clicks * 30 * 20)} (CTR 5%)

CONVERSIONES Y RESULTADOS:
${'‚îÄ'.repeat(60)}
Leads mensuales: ${Math.round(leads * 30)}
CVR web estimado: ${formData.conversionRate}%
Tasa de cierre: 30%
Ventas mensuales: ${Math.round(sales * 30)}

M√âTRICAS FINANCIERAS:
${'‚îÄ'.repeat(60)}
Ingresos proyectados: ${(revenue * 30).toFixed(2)}‚Ç¨
Ticket medio: ${formData.avgTicket.toFixed(2)}‚Ç¨
CPL (Coste por Lead): ${cpl.toFixed(2)}‚Ç¨
CPA (Coste por Adquisici√≥n): ${sales > 0 ? (formData.dailyBudget / sales).toFixed(2) : 'N/A'}‚Ç¨
ROI estimado: ${roi.toFixed(0)}%
ROAS estimado: ${formData.dailyBudget > 0 ? (revenue / formData.dailyBudget).toFixed(2) : 'N/A'}

OBJETIVOS DE CALIDAD:
${'‚îÄ'.repeat(60)}
Quality Score objetivo: 7-10`;

      if (urlContent) {
        forecastText += ` üöÄ (Mejorado con an√°lisis de URL)`;
      }

      forecastText += `
CTR objetivo: 3-5%
Nivel de relevancia: Alto
Experiencia en p√°gina destino: Buena

NOTAS ESTRAT√âGICAS:
${'‚îÄ'.repeat(60)}
‚Ä¢ Iniciar con presupuesto conservador
‚Ä¢ Optimizar seg√∫n datos reales a partir del d√≠a 7
‚Ä¢ Pausar keywords con QS < 5
‚Ä¢ Activar remarketing tras 500 visitantes
‚Ä¢ Revisar t√©rminos de b√∫squeda semanalmente
‚Ä¢ Ajustar pujas seg√∫n dispositivo y hora
‚Ä¢ Implementar seguimiento de conversiones desde d√≠a 1`;

      if (urlContent) {
        forecastText += `

‚úÖ VENTAJAS DEL AN√ÅLISIS DE URL APLICADO:
${'‚îÄ'.repeat(60)}
‚Ä¢ Mayor relevancia entre anuncios y landing page
‚Ä¢ Quality Score m√°s alto desde el inicio
‚Ä¢ CPC m√°s bajo por mejor relevancia
‚Ä¢ CTR superior gracias a la coherencia
‚Ä¢ Conversiones m√°s altas por mensaje alineado
`;
      }
      
      resultsHTML += createResultCard('Forecast & KPIs', forecastText, 'forecast');
      
      document.getElementById('resultsGrid').innerHTML = resultsHTML;
    }
    
    // Create result card
    function createResultCard(title, content, id) {
      return `
        <div class="result-card">
          <div class="result-header">
            <div class="result-title">${title}</div>
            <button class="copy-btn" onclick="copyToClipboard('result-${id}')">üìã Copiar</button>
          </div>
          <div class="result-content" id="result-${id}">${content}</div>
        </div>
      `;
    }
    
    // Copy to clipboard
    function copyToClipboard(elementId) {
      const element = document.getElementById(elementId);
      const text = element.textContent;
      
      navigator.clipboard.writeText(text).then(() => {
        showToast('‚úÖ Copiado al portapapeles');
      }).catch(err => {
        console.error('Error:', err);
        showToast('‚ùå Error al copiar', 'error');
      });
    }
    
    // Show toast
    function showToast(message, type = 'success') {
      const toast = document.getElementById('toast');
      const toastText = document.getElementById('toastText');
      const toastIcon = toast.querySelector('.toast-icon');
      
      toastText.textContent = message;
      toastIcon.textContent = type === 'success' ? '‚úÖ' : '‚ö†Ô∏è';
      toast.style.borderColor = type === 'success' ? 'var(--success)' : 'var(--warning)';
      
      toast.classList.add('show');
      setTimeout(() => {
        toast.classList.remove('show');
      }, 3000);
    }
    
    // Export to Excel
    function exportToExcel() {
      if (!generatedCampaign) {
        showToast('‚ö†Ô∏è Primero genera una campa√±a', 'warning');
        return;
      }
      
      try {
        const wb = XLSX.utils.book_new();
        
        // Sheet 1: Campaign Summary
        const summaryData = [
          ['CAMPA√ëA GOOGLE ADS - FRANCISCO BLANCO PRO'],
          [''],
          ['Nombre de Campa√±a', generatedCampaign.name],
          ['Tipo', generatedCampaign.type],
          ['Presupuesto Diario', generatedCampaign.budget + '‚Ç¨'],
          ['Estrategia de Puja', generatedCampaign.bidStrategy],
          ['Ubicaci√≥n', generatedCampaign.location],
          [''],
          ['ESTAD√çSTICAS'],
          ['Grupos de Anuncios', generatedCampaign.adGroups.length],
          ['Total Keywords', generatedCampaign.adGroups.reduce((s, ag) => s + ag.keywords.length, 0)],
          ['Total Anuncios', generatedCampaign.adGroups.reduce((s, ag) => s + ag.ads.length, 0)],
          ['Keywords Negativas', Array.isArray(generatedCampaign.negatives) ? generatedCampaign.negatives.length : (generatedCampaign.negatives.exact?.length || 0) + (generatedCampaign.negatives.phrase?.length || 0)]
        ];
        
        if (urlContent) {
          summaryData.push([''], ['‚úÖ URL ANALIZADA', formData.landingUrl || 'S√≠']);
        }
        
        const ws1 = XLSX.utils.aoa_to_sheet(summaryData);
        XLSX.utils.book_append_sheet(wb, ws1, 'Resumen');
        
        // Sheet 2: Keywords
        const keywordsData = [['Campaign', 'Ad Group', 'Keyword', 'Match Type', 'Max CPC']];
        generatedCampaign.adGroups.forEach(ag => {
          ag.keywords.forEach(kw => {
            keywordsData.push([
              generatedCampaign.name,
              ag.name,
              kw.keyword,
              kw.matchType,
              kw.maxCPC || ag.bid
            ]);
          });
        });
        const ws2 = XLSX.utils.aoa_to_sheet(keywordsData);
        XLSX.utils.book_append_sheet(wb, ws2, 'Keywords');
        
        // Sheet 3: Ads
        const adsData = [['Campaign', 'Ad Group', 'Headline 1', 'Headline 2', 'Headline 3', 'Description 1', 'Description 2', 'Path 1', 'Path 2', 'Final URL']];
        generatedCampaign.adGroups.forEach(ag => {
          ag.ads.forEach(ad => {
            adsData.push([
              generatedCampaign.name,
              ag.name,
              ad.headlines[0] || '',
              ad.headlines[1] || '',
              ad.headlines[2] || '',
              ad.descriptions[0] || '',
              ad.descriptions[1] || '',
              ad.path1,
              ad.path2,
              ad.finalUrl
            ]);
          });
        });
        const ws3 = XLSX.utils.aoa_to_sheet(adsData);
        XLSX.utils.book_append_sheet(wb, ws3, 'Anuncios');
        
        // Sheet 4: RSA Complete
        const rsaData = [['Campaign', 'Ad Group', 'Headline Position', 'Headline Text']];
        generatedCampaign.adGroups.forEach(ag => {
          ag.ads.forEach(ad => {
            ad.headlines.forEach((h, idx) => {
              rsaData.push([generatedCampaign.name, ag.name, `H${idx + 1}`, h]);
            });
          });
        });
        const ws4 = XLSX.utils.aoa_to_sheet(rsaData);
        XLSX.utils.book_append_sheet(wb, ws4, 'RSA Titulares');
        
        // Sheet 5: Negatives (con EXACT y PHRASE)
        const negativesData = [['Campaign', 'Negative Keyword', 'Match Type']];
        
        // Handle both old format (array) and new format (object with exact/phrase)
        if (Array.isArray(generatedCampaign.negatives)) {
          // Old format
          generatedCampaign.negatives.forEach(neg => {
            negativesData.push([generatedCampaign.name, neg, 'Exacta']);
          });
        } else if (generatedCampaign.negatives && typeof generatedCampaign.negatives === 'object') {
          // New format
          if (generatedCampaign.negatives.exact) {
            generatedCampaign.negatives.exact.forEach(neg => {
              negativesData.push([generatedCampaign.name, neg, 'Exacta']);
            });
          }
          if (generatedCampaign.negatives.phrase) {
            generatedCampaign.negatives.phrase.forEach(neg => {
              negativesData.push([generatedCampaign.name, neg, 'Frase']);
            });
          }
        }
        
        const ws5 = XLSX.utils.aoa_to_sheet(negativesData);
        XLSX.utils.book_append_sheet(wb, ws5, 'Negativas');
        
        // Sheet 6: Extensions
        const extensionsData = [['Type', 'Text', 'Description', 'URL']];
        generatedCampaign.extensions.sitelinks.forEach(link => {
          extensionsData.push(['Sitelink', link.title, link.desc, link.url]);
        });
        generatedCampaign.extensions.callouts.forEach(callout => {
          extensionsData.push(['Callout', callout, '', '']);
        });
        const ws6 = XLSX.utils.aoa_to_sheet(extensionsData);
        XLSX.utils.book_append_sheet(wb, ws6, 'Extensiones');
        
        // Generate file
        XLSX.writeFile(wb, `Campa√±a_GoogleAds_${generatedCampaign.name.replace(/[^a-zA-Z0-9]/g, '_')}.xlsx`);
        
        showToast('‚úÖ Excel descargado correctamente');
      } catch (error) {
        console.error('Error generating Excel:', error);
        showToast('‚ùå Error al generar Excel', 'error');
      }
    }
    
    // NEW: Export for Google Ads Editor (Complete Campaign)
    function exportForGoogleAdsEditor() {
      if (!generatedCampaign) {
        showToast('‚ö†Ô∏è Primero genera una campa√±a', 'warning');
        return;
      }
      
      try {
        console.log('Iniciando exportaci√≥n...');
        console.log('Campa√±a:', generatedCampaign);
        
        const wb = XLSX.utils.book_new();
        const campaign = generatedCampaign;
        
        // Sheet 1: Keywords for Google Ads Editor
        const keywordsData = [['Campaign', 'Ad Group', 'Keyword', 'Criterion Type', 'Max CPC']];
        campaign.adGroups.forEach(ag => {
          ag.keywords.forEach(kw => {
            // Apply correct match type syntax
            let formattedKeyword = kw.keyword;
            if (kw.matchType === 'EXACT') {
              formattedKeyword = `[${kw.keyword}]`;
            } else if (kw.matchType === 'PHRASE') {
              formattedKeyword = `"${kw.keyword}"`;
            }
            // BROAD stays without symbols
            
            keywordsData.push([
              campaign.name,
              ag.name,
              formattedKeyword,
              kw.matchType,
              kw.maxCPC || ag.bid
            ]);
          });
        });
        const ws1 = XLSX.utils.aoa_to_sheet(keywordsData);
        XLSX.utils.book_append_sheet(wb, ws1, 'Keywords');
        
        // Sheet 2: Responsive Search Ads
        const adsData = [['Campaign', 'Ad Group', 'Ad Type']];
        // Add all headline columns (H1-H15)
        for (let i = 1; i <= 15; i++) {
          adsData[0].push(`Headline ${i}`);
        }
        // Add description columns (D1-D4)
        for (let i = 1; i <= 4; i++) {
          adsData[0].push(`Description ${i}`);
        }
        adsData[0].push('Path 1', 'Path 2', 'Final URL');
        
        campaign.adGroups.forEach(ag => {
          ag.ads.forEach(ad => {
            const row = [campaign.name, ag.name, 'Responsive search ad'];
            // Add headlines
            for (let i = 0; i < 15; i++) {
              row.push(ad.headlines[i] || '');
            }
            // Add descriptions
            for (let i = 0; i < 4; i++) {
              row.push(ad.descriptions[i] || '');
            }
            row.push(ad.path1, ad.path2, ad.finalUrl);
            adsData.push(row);
          });
        });
        const ws2 = XLSX.utils.aoa_to_sheet(adsData);
        XLSX.utils.book_append_sheet(wb, ws2, 'Ads');
        
        // Sheet 3: Negative Keywords (con EXACT y PHRASE)
        const negativesData = [['Campaign', 'Keyword', 'Match Type']];
        
        // üî• DEDUPLICACI√ìN AUTOM√ÅTICA - Francisco Blanco
        // Eliminar keywords negativas duplicadas antes de exportar
        if (Array.isArray(campaign.negatives)) {
          // Old format - backwards compatibility
          campaign.negatives = [...new Set(campaign.negatives)]; // Deduplicar
        } else if (campaign.negatives && typeof campaign.negatives === 'object') {
          // New format with exact and phrase - deduplicar ambas listas
          if (campaign.negatives.exact) {
            campaign.negatives.exact = [...new Set(campaign.negatives.exact)];
          }
          if (campaign.negatives.phrase) {
            campaign.negatives.phrase = [...new Set(campaign.negatives.phrase)];
          }
        }
        
        // Handle both old format (array) and new format (object with exact/phrase)
        if (Array.isArray(campaign.negatives)) {
          // Old format - backwards compatibility
          campaign.negatives.forEach(neg => {
            negativesData.push([campaign.name, neg, 'Exact']);
          });
        } else if (campaign.negatives && typeof campaign.negatives === 'object') {
          // New format with exact and phrase
          if (campaign.negatives.exact) {
            campaign.negatives.exact.forEach(neg => {
              negativesData.push([campaign.name, neg, 'Exact']);
            });
          }
          if (campaign.negatives.phrase) {
            campaign.negatives.phrase.forEach(neg => {
              negativesData.push([campaign.name, neg, 'Phrase']);
            });
          }
        }
        
        const ws3 = XLSX.utils.aoa_to_sheet(negativesData);
        XLSX.utils.book_append_sheet(wb, ws3, 'Negative Keywords');
        
        // Sheet 4: Sitelinks
        const sitelinksData = [['Campaign', 'Sitelink Text', 'Sitelink Description 1', 'Sitelink Description 2', 'Sitelink Final URL']];
        campaign.extensions.sitelinks.forEach(link => {
          sitelinksData.push([campaign.name, link.title, link.desc, link.desc2 || '', link.url]);
        });
        const ws4 = XLSX.utils.aoa_to_sheet(sitelinksData);
        XLSX.utils.book_append_sheet(wb, ws4, 'Sitelinks');
        
        // Sheet 5: Callout Extensions
        const calloutsData = [['Campaign', 'Callout Text']];
        campaign.extensions.callouts.forEach(callout => {
          calloutsData.push([campaign.name, callout]);
        });
        const ws5 = XLSX.utils.aoa_to_sheet(calloutsData);
        XLSX.utils.book_append_sheet(wb, ws5, 'Callouts');
        
        // Sheet 6: Structured Snippets
        const snippetsData = [['Campaign', 'Header', 'Values']];
        if (campaign.extensions && campaign.extensions.snippets) {
          Object.entries(campaign.extensions.snippets).forEach(([header, values]) => {
            // Google Ads Editor espera los valores separados por punto y coma
            const valuesStr = Array.isArray(values) ? values.join('; ') : values;
            snippetsData.push([campaign.name, header, valuesStr]);
          });
        }
        const ws6 = XLSX.utils.aoa_to_sheet(snippetsData);
        XLSX.utils.book_append_sheet(wb, ws6, 'Structured Snippets');
        
        // Sheet 7: Instructions
        const instructionsData = [
          ['INSTRUCCIONES PARA IMPORTAR EN GOOGLE ADS EDITOR'],
          [''],
          ['PASO 1: Descarga Google Ads Editor'],
          ['‚Ä¢ Ve a: https://ads.google.com/home/tools/google-ads-editor/'],
          ['‚Ä¢ Descarga e instala la √∫ltima versi√≥n'],
          [''],
          ['PASO 2: Abre Google Ads Editor y selecciona tu cuenta'],
          ['‚Ä¢ Inicia sesi√≥n con tu cuenta de Google Ads'],
          ['‚Ä¢ Selecciona la cuenta donde quieres crear la campa√±a'],
          [''],
          ['PASO 3: Importar el archivo'],
          ['‚Ä¢ Ve a: Cuenta ‚Üí Importar ‚Üí Desde archivo'],
          ['‚Ä¢ Selecciona este archivo Excel'],
          ['‚Ä¢ Google Ads Editor leer√° autom√°ticamente las pesta√±as'],
          [''],
          ['PASO 4: Revisar y aplicar cambios'],
          ['‚Ä¢ Revisa que todo se haya importado correctamente'],
          ['‚Ä¢ Haz clic en "Publicar cambios"'],
          ['‚Ä¢ Los cambios se subir√°n a tu cuenta de Google Ads'],
          [''],
          ['NOTAS IMPORTANTES:'],
          ['‚Ä¢ Todas las pesta√±as est√°n en formato compatible con Google Ads Editor'],
          ['‚Ä¢ Los anuncios se crear√°n como Responsive Search Ads (RSA)'],
          ['‚Ä¢ Las keywords tienen los tipos de concordancia correctos'],
          ['‚Ä¢ Las extensiones se aplicar√°n a nivel de campa√±a'],
          [''],
          ['FORMATOS DE CONCORDANCIA:'],
          ['‚Ä¢ EXACT = Concordancia exacta [keyword]'],
          ['‚Ä¢ PHRASE = Concordancia de frase "keyword"'],
          ['‚Ä¢ BROAD = Concordancia amplia modificada +keyword'],
          [''],
          ['¬øNECESITAS AYUDA?'],
          ['‚Ä¢ Documentaci√≥n oficial: https://support.google.com/google-ads/editor'],
          ['‚Ä¢ Video tutorial: Busca "Google Ads Editor import" en YouTube']
        ];
        const ws7 = XLSX.utils.aoa_to_sheet(instructionsData);
        XLSX.utils.book_append_sheet(wb, ws7, 'INSTRUCCIONES');
        
        // Generate file
        const filename = `GoogleAdsEditor_${campaign.name.replace(/[^a-zA-Z0-9]/g, '_')}.xlsx`;
        
        console.log('Generando archivo:', filename);
        
        XLSX.writeFile(wb, filename);
        
        console.log('Archivo generado exitosamente');
        showToast('‚úÖ Archivo para Google Ads Editor descargado');
      } catch (error) {
        console.error('Error completo en exportaci√≥n:', error);
        console.error('Stack:', error.stack);
        alert('Error al generar archivo: ' + error.message + '\n\nRevisa la consola (F12) para m√°s detalles');
        showToast('‚ùå Error al generar archivo', 'error');
      }
    }
    
    // NEW: Export only Keywords as CSV
    function exportKeywordsCSV() {
      if (!generatedCampaign) {
        showToast('‚ö†Ô∏è Primero genera una campa√±a', 'warning');
        return;
      }
      
      let csv = 'Campaign,Ad Group,Keyword,Match Type,Max CPC\n';
      
      generatedCampaign.adGroups.forEach(ag => {
        ag.keywords.forEach(kw => {
          // Apply correct match type syntax
          let formattedKeyword = kw.keyword;
          if (kw.matchType === 'EXACT') {
            formattedKeyword = `[${kw.keyword}]`;
          } else if (kw.matchType === 'PHRASE') {
            formattedKeyword = `"${kw.keyword}"`;
          }
          // BROAD stays without symbols
          
          csv += `"${generatedCampaign.name}","${ag.name}","${formattedKeyword}","${kw.matchType}",${kw.maxCPC || ag.bid}\n`;
        });
      });
      
      downloadFile(csv, `Keywords_${generatedCampaign.name.replace(/[^a-zA-Z0-9]/g, '_')}.csv`, 'text/csv');
      showToast('‚úÖ Keywords descargadas en CSV');
    }
    
    // NEW: Export only Ads as CSV
    function exportAdsCSV() {
      if (!generatedCampaign) {
        showToast('‚ö†Ô∏è Primero genera una campa√±a', 'warning');
        return;
      }
      
      let csv = 'Campaign,Ad Group,Ad Type';
      // Add headline columns
      for (let i = 1; i <= 15; i++) {
        csv += `,Headline ${i}`;
      }
      // Add description columns
      for (let i = 1; i <= 4; i++) {
        csv += `,Description ${i}`;
      }
      csv += ',Path 1,Path 2,Final URL\n';
      
      generatedCampaign.adGroups.forEach(ag => {
        ag.ads.forEach(ad => {
          csv += `"${generatedCampaign.name}","${ag.name}","Responsive search ad"`;
          // Add headlines
          for (let i = 0; i < 15; i++) {
            csv += `,"${(ad.headlines[i] || '').replace(/"/g, '""')}"`;
          }
          // Add descriptions
          for (let i = 0; i < 4; i++) {
            csv += `,"${(ad.descriptions[i] || '').replace(/"/g, '""')}"`;
          }
          csv += `,"${ad.path1}","${ad.path2}","${ad.finalUrl}"\n`;
        });
      });
      
      downloadFile(csv, `Anuncios_${generatedCampaign.name.replace(/[^a-zA-Z0-9]/g, '_')}.csv`, 'text/csv');
      showToast('‚úÖ Anuncios descargados en CSV');
    }
    
    // NEW: Export Complete CSV for Google Ads Editor (ALL campaign data in one file)
    function exportCompleteCSV() {
      if (!generatedCampaign) {
        showToast('‚ö†Ô∏è Primero genera una campa√±a', 'warning');
        return;
      }
      
      const campaign = generatedCampaign;
      let csv = '';
      
      // Header for Google Ads Editor CSV format
      csv += '# Google Ads Editor CSV - Ads Engine Pro by Francisco Blanco\n';
      csv += `# Campaign: ${campaign.name}\n`;
      csv += `# Generated: ${new Date().toLocaleDateString()}\n`;
      csv += '#\n';
      csv += '# Instructions:\n';
      csv += '# 1. Open Google Ads Editor\n';
      csv += '# 2. Account > Import > From file\n';
      csv += '# 3. Select this CSV file\n';
      csv += '# 4. Review and Post changes\n';
      csv += '#\n\n';
      
      // SECTION 1: CAMPAIGN INFO
      csv += '### CAMPAIGN ###\n';
      csv += 'Campaign,Budget,Budget Type,Campaign Type,Network\n';
      csv += `"${campaign.name}",${campaign.budget || formData.dailyBudget},Daily,Search,Google Search\n\n`;
      
      // SECTION 2: KEYWORDS
      csv += '### KEYWORDS ###\n';
      csv += 'Campaign,Ad Group,Keyword,Match Type,Max CPC\n';
      campaign.adGroups.forEach(ag => {
        ag.keywords.forEach(kw => {
          const matchType = kw.matchType === 'EXACT' ? 'Exact' : 
                           kw.matchType === 'PHRASE' ? 'Phrase' : 'Broad';
          
          // Apply correct match type syntax
          let formattedKeyword = (kw.keyword || '').replace(/"/g, '""');
          if (kw.matchType === 'EXACT') {
            formattedKeyword = `[${formattedKeyword}]`;
          } else if (kw.matchType === 'PHRASE') {
            formattedKeyword = `"${formattedKeyword}"`;
          }
          // BROAD stays without symbols
          
          const maxCPC = kw.maxCPC || ag.bid || formData.estimatedCPC || '1.00';
          csv += `"${campaign.name}","${ag.name}","${formattedKeyword}","${matchType}",${maxCPC}\n`;
        });
      });
      csv += '\n';
      
      // SECTION 3: NEGATIVE KEYWORDS
      const negKws = campaign.negativeKeywords || 
                     (campaign.extensions && campaign.extensions.negativeKeywords) || [];
      if (negKws.length > 0) {
        csv += '### NEGATIVE KEYWORDS ###\n';
        csv += 'Campaign,Negative Keyword,Match Type\n';
        negKws.forEach(nk => {
          const kw = (typeof nk === 'string') ? nk : (nk.keyword || nk.text || '');
          const mt = (typeof nk === 'object' && nk.matchType) ? nk.matchType : 'Exact';
          if (kw) csv += `"${campaign.name}","${kw.replace(/"/g, '""')}","${mt}"\n`;
        });
        csv += '\n';
      }
      
      // SECTION 4: ADS
      csv += '### RESPONSIVE SEARCH ADS ###\n';
      csv += 'Campaign,Ad Group,Ad Type';
      for (let i = 1; i <= 15; i++) csv += `,Headline ${i}`;
      for (let i = 1; i <= 4; i++) csv += `,Description ${i}`;
      csv += ',Path 1,Path 2,Final URL\n';
      
      campaign.adGroups.forEach(ag => {
        ag.ads.forEach(ad => {
          csv += `"${campaign.name}","${ag.name}","Responsive search ad"`;
          // Headlines
          for (let i = 0; i < 15; i++) {
            const headline = (ad.headlines && ad.headlines[i]) || '';
            csv += `,"${headline.replace(/"/g, '""')}"`;
          }
          // Descriptions
          for (let i = 0; i < 4; i++) {
            const desc = (ad.descriptions && ad.descriptions[i]) || '';
            csv += `,"${desc.replace(/"/g, '""')}"`;
          }
          const path1 = (ad.path1 || '').replace(/"/g, '""');
          const path2 = (ad.path2 || '').replace(/"/g, '""');
          const finalUrl = (ad.finalUrl || formData.landingUrl || '').replace(/"/g, '""');
          csv += `,"${path1}","${path2}","${finalUrl}"\n`;
        });
      });
      csv += '\n';
      
      // SECTION 5: SITELINK EXTENSIONS
      if (campaign.extensions && campaign.extensions.sitelinks && campaign.extensions.sitelinks.length > 0) {
        csv += '### SITELINK EXTENSIONS ###\n';
        csv += 'Campaign,Sitelink Text,Sitelink URL,Description 1,Description 2\n';
        campaign.extensions.sitelinks.forEach(sl => {
          const text = (sl.text || sl.title || '').replace(/"/g, '""');
          const url = (sl.url || formData.landingUrl || '').replace(/"/g, '""');
          const desc1 = (sl.description1 || sl.desc || '').replace(/"/g, '""');
          const desc2 = (sl.description2 || '').replace(/"/g, '""');
          csv += `"${campaign.name}","${text}","${url}","${desc1}","${desc2}"\n`;
        });
        csv += '\n';
      }
      
      // SECTION 6: CALLOUT EXTENSIONS
      if (campaign.extensions && campaign.extensions.callouts && campaign.extensions.callouts.length > 0) {
        csv += '### CALLOUT EXTENSIONS ###\n';
        csv += 'Campaign,Callout Text\n';
        campaign.extensions.callouts.forEach(co => {
          csv += `"${campaign.name}","${co.replace(/"/g, '""')}"\n`;
        });
        csv += '\n';
      }
      
      // SECTION 7: STRUCTURED SNIPPETS
      const snippets = (campaign.extensions && campaign.extensions.snippets) || 
                       (campaign.extensions && campaign.extensions.structuredSnippets) || {};
      if (Object.keys(snippets).length > 0) {
        csv += '### STRUCTURED SNIPPET EXTENSIONS ###\n';
        csv += 'Campaign,Header,Values\n';
        Object.entries(snippets).forEach(([header, values]) => {
          if (Array.isArray(values) && values.length > 0) {
            csv += `"${campaign.name}","${header}","${values.join('; ')}"\n`;
          }
        });
        csv += '\n';
      }
      
      // Footer
      csv += '\n# End of CSV - Ready for Google Ads Editor import\n';
      csv += '# Created with Ads Engine Pro V8 TOP by Francisco Blanco (www.franciscoblanco.es)\n';
      
      // Download
      const filename = `GoogleAdsEditor_COMPLETE_${campaign.name.replace(/[^a-zA-Z0-9]/g, '_')}.csv`;
      downloadFile(csv, filename, 'text/csv;charset=utf-8');
      showToast('‚úÖ CSV Completo descargado - Listo para Google Ads Editor');
    }
    
    // NEW: Show import instructions in modal
    function showImportInstructions() {
      const instructions = `
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
GU√çA COMPLETA: C√ìMO IMPORTAR TU CAMPA√ëA A GOOGLE ADS
Por Francisco Blanco - Ads Engine Pro
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

üì• M√âTODO 1: GOOGLE ADS EDITOR (Recomendado - M√°s R√°pido)
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

1Ô∏è‚É£ DESCARGA GOOGLE ADS EDITOR
   ‚Ä¢ Ve a: https://ads.google.com/home/tools/google-ads-editor/
   ‚Ä¢ Descarga e instala (Windows/Mac)
   ‚Ä¢ Es GRATIS y oficial de Google

2Ô∏è‚É£ DESCARGA TU ARCHIVO
   OPCI√ìN A (TODO EN UNO): Haz clic en "üì• CSV Completo"
   ‚Ä¢ Se descargar√° un CSV con toda la campa√±a
   ‚Ä¢ Incluye: Campa√±a, Keywords, Anuncios, Extensiones
   
   OPCI√ìN B (EXCEL): Haz clic en "üöÄ Google Ads Editor" o "üìä Excel Completo"
   ‚Ä¢ Se descargar√° un Excel optimizado con pesta√±as separadas

3Ô∏è‚É£ IMPORTA EN GOOGLE ADS EDITOR
   ‚Ä¢ Abre Google Ads Editor
   ‚Ä¢ Cuenta ‚Üí Importar ‚Üí Desde archivo
   ‚Ä¢ Selecciona el CSV/Excel descargado
   ‚Ä¢ Revisa los datos importados

4Ô∏è‚É£ PUBLICA LOS CAMBIOS
   ‚Ä¢ Haz clic en "Publicar"
   ‚Ä¢ ¬°Listo! Tu campa√±a est√° en Google Ads

‚è±Ô∏è TIEMPO TOTAL: 5-10 minutos

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

üñ±Ô∏è M√âTODO 2: IMPORTACI√ìN MANUAL EN GOOGLE ADS
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

PASO A: Crear la campa√±a
   ‚Ä¢ En Google Ads ‚Üí Campa√±as ‚Üí Nueva Campa√±a
   ‚Ä¢ Usa los datos del "Resumen de Campa√±a"

PASO B: Importar Keywords
   ‚Ä¢ Descarga: "üîë Solo Keywords"
   ‚Ä¢ En tu campa√±a ‚Üí Palabras Clave ‚Üí Importar
   ‚Ä¢ Sube el CSV de keywords

PASO C: Importar Anuncios
   ‚Ä¢ Descarga: "üìù Solo Anuncios"
   ‚Ä¢ En tu grupo de anuncios ‚Üí Anuncios ‚Üí Importar
   ‚Ä¢ Sube el CSV de anuncios

PASO D: Agregar Extensiones
   ‚Ä¢ Usa el bot√≥n "üìã Copiar Todo"
   ‚Ä¢ Copia manualmente las extensiones

‚è±Ô∏è TIEMPO TOTAL: 20-30 minutos

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

üìä M√âTODO 3: EXCEL COMPLETO (Para Revisi√≥n)
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

   ‚Ä¢ Descarga: "üìä Excel Completo"
   ‚Ä¢ √Åbrelo para revisar toda la estructura
   ‚Ä¢ √ösalo como referencia mientras creas manualmente
   ‚Ä¢ Todas las pesta√±as est√°n organizadas

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

üí° CONSEJOS PRO:
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

‚úÖ Usa M√âTODO 1 (Google Ads Editor) para campa√±as grandes
‚úÖ Revisa los anuncios antes de publicar
‚úÖ Empieza con presupuesto bajo y optimiza
‚úÖ Activa el seguimiento de conversiones ANTES de publicar
‚úÖ Revisa los t√©rminos de b√∫squeda despu√©s de 1 semana

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

üÜò ¬øNECESITAS AYUDA T√âCNICA?
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

‚Ä¢ Google Ads Editor: https://support.google.com/google-ads/editor
‚Ä¢ Soporte Google Ads: https://support.google.com/google-ads
‚Ä¢ Documentaci√≥n oficial: https://ads.google.com/home/resources/

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

¬°√âXITO CON TU CAMPA√ëA! üöÄ
      `;
      
      // Copy to clipboard
      navigator.clipboard.writeText(instructions).then(() => {
        showToast('‚úÖ Instrucciones copiadas al portapapeles');
        // Also show in alert for immediate viewing
        alert(instructions);
      }).catch(() => {
        alert(instructions);
      });
    }
    
    // Export to text
    function exportToText() {
      if (!generatedCampaign) {
        showToast('‚ö†Ô∏è Primero genera una campa√±a', 'warning');
        return;
      }
      
      const allText = Array.from(document.querySelectorAll('.result-content'))
        .map(el => el.textContent)
        .join('\n\n' + '‚ïê'.repeat(80) + '\n\n');
      
      navigator.clipboard.writeText(allText).then(() => {
        showToast('‚úÖ Campa√±a completa copiada al portapapeles');
      });
    }
    
    // Download file helper
    function downloadFile(content, filename, type) {
      const blob = new Blob([content], { type: type });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = filename;
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);
    }
    
    // Reset and start new campaign
    function resetAndStart() {
      if (confirm('¬øEst√°s seguro de que quieres crear una nueva campa√±a? Se perder√° la campa√±a actual.')) {
        location.reload();
      }
    }
    
    // ENHANCED: Enable/disable strength fields based on checkboxes
    document.addEventListener('DOMContentLoaded', function() {
      // Shipping checkbox
      const shippingCheck = document.getElementById('strength_shipping');
      const shippingAmount = document.getElementById('strength_shipping_amount');
      if (shippingCheck && shippingAmount) {
        shippingCheck.addEventListener('change', function() {
          shippingAmount.disabled = !this.checked;
          if (this.checked) shippingAmount.focus();
        });
      }
      
      // Experience checkbox
      const experienceCheck = document.getElementById('strength_experience');
      const experienceYears = document.getElementById('strength_experience_years');
      if (experienceCheck && experienceYears) {
        experienceCheck.addEventListener('change', function() {
          experienceYears.disabled = !this.checked;
          if (this.checked) experienceYears.focus();
        });
      }
      
      // Returns checkbox
      const returnsCheck = document.getElementById('strength_returns');
      const returnsText = document.getElementById('strength_returns_text');
      if (returnsCheck && returnsText) {
        returnsCheck.addEventListener('change', function() {
          returnsText.disabled = !this.checked;
          if (this.checked) returnsText.focus();
        });
      }
      
      // Support checkbox
      const supportCheck = document.getElementById('strength_support');
      const supportText = document.getElementById('strength_support_text');
      const supportPhone = document.getElementById('strength_support_phone');
      if (supportCheck && supportText && supportPhone) {
        supportCheck.addEventListener('change', function() {
          supportText.disabled = !this.checked;
          supportPhone.disabled = !this.checked;
          if (this.checked) supportText.focus();
        });
      }
      
    });
  </script>
</body>
</html>
